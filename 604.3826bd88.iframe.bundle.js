"use strict";(self.webpackChunk_plone_volto=self.webpackChunk_plone_volto||[]).push([[604],{"../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/constants/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Sc:function(){return HORIZONTAL_DIRECTIONS},UD:function(){return VERTICAL_DIRECTIONS},sR:function(){return ALL_DIRECTIONS}});var ALL_DIRECTIONS=["left","right","top","bottom"],HORIZONTAL_DIRECTIONS=["left","right"],VERTICAL_DIRECTIONS=["top","bottom"]},"../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/image/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Go:function(){return loadImage},is:function(){return getPreviewStyle},uC:function(){return getBackgroundStyle}});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs"),_utils_index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/utils/index.js"),_service_utils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/utils.js"),_service_helpers_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/helpers.js"),XHR_DONE=4;function getImageData(img){return new Promise(function(resolve,reject){try{if(img)if(/^data:/i.test(img))resolve(function base64ToArrayBuffer(base64){base64=base64.replace(/^data:([^;]+);base64,/gim,"");for(var binary=atob(base64),len=binary.length,buffer=new ArrayBuffer(len),view=new Uint8Array(buffer),i=0;i<len;i++)view[i]=binary.charCodeAt(i);return buffer}(img));else if(/^blob:/i.test(img)){var fileReader_1=new FileReader;fileReader_1.onload=function(e){var _a;resolve(null===(_a=e.target)||void 0===_a?void 0:_a.result)},function objectURLToBlob(url,callback){var http=new XMLHttpRequest;http.open("GET",url,!0),http.responseType="blob",http.onload=function(){200!=this.status&&0!==this.status||callback(this.response)},http.send()}(img,function(blob){fileReader_1.readAsArrayBuffer(blob)})}else{var http_1=new XMLHttpRequest;http_1.onreadystatechange=function(){http_1.readyState===XHR_DONE&&(200===http_1.status||0===http_1.status?resolve(http_1.response):reject("Warning: could not load an image to parse its orientation"))},http_1.onprogress=function(){"image/jpeg"!==http_1.getResponseHeader("content-type")&&http_1.abort()},http_1.withCredentials=!1,http_1.open("GET",img,!0),http_1.responseType="arraybuffer",http_1.send(null)}else reject("Error: the image is empty")}catch(e){reject(e)}})}function getStyleTransforms(transforms){var _a=transforms.rotate,rotate=void 0===_a?0:_a,_b=transforms.flip,flip=void 0===_b?{horizontal:!1,vertical:!1}:_b,_c=transforms.scale,scale=void 0===_c?1:_c;return" rotate("+rotate+"deg) scaleX("+scale*(flip.horizontal?-1:1)+") scaleY("+scale*(flip.vertical?-1:1)+")"}function resetAndGetOrientation(arrayBuffer){try{var orientation_1,dataView=new DataView(arrayBuffer),tiffOffset=void 0,littleEndian=void 0,app1Start=void 0,ifdStart=void 0;if(255===dataView.getUint8(0)&&216===dataView.getUint8(1))for(var length_1=dataView.byteLength,offset=2;offset+1<length_1;){if(255===dataView.getUint8(offset)&&225===dataView.getUint8(offset+1)){app1Start=offset;break}offset++}if(app1Start&&(tiffOffset=app1Start+10,"Exif"===function getStringFromCharCode(dataView,start,length){var i,str="";for(i=start,length+=start;i<length;i++)str+=String.fromCharCode(dataView.getUint8(i));return str}(dataView,app1Start+4,4))){var endianness=dataView.getUint16(tiffOffset);if(((littleEndian=18761===endianness)||19789===endianness)&&42===dataView.getUint16(tiffOffset+2,littleEndian)){var firstIFDOffset=dataView.getUint32(tiffOffset+4,littleEndian);firstIFDOffset>=8&&(ifdStart=tiffOffset+firstIFDOffset)}}if(ifdStart)for(var length_2=dataView.getUint16(ifdStart,littleEndian),i=0;i<length_2;i++){offset=ifdStart+12*i+2;if(274===dataView.getUint16(offset,littleEndian)){offset+=8,orientation_1=dataView.getUint16(offset,littleEndian),dataView.setUint16(offset,1,littleEndian);break}}return orientation_1}catch(error){return null}}function getImage(_a){var src=_a.src,_b=_a.arrayBuffer,arrayBuffer=void 0===_b?null:_b,_c=_a.orientation,orientation=void 0===_c?null:_c,options={src:src,arrayBuffer:arrayBuffer,revoke:!1,transforms:{flip:{horizontal:!1,vertical:!1},rotate:0}};return arrayBuffer&&orientation&&orientation>1?(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.Yf)(src)||!(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_0__._w)(src)?(options.src=URL.createObjectURL(new Blob([arrayBuffer])),options.revoke=!0):options.src=function arrayBufferToDataURL(arrayBuffer){for(var chunks=[],uint8=new Uint8Array(arrayBuffer);uint8.length>0;){var value=uint8.subarray(0,8192);chunks.push(String.fromCharCode.apply(null,Array.from?Array.from(value):value.slice())),uint8=uint8.subarray(8192)}return"data:image/jpeg;base64,"+btoa(chunks.join(""))}(arrayBuffer):options.src=src,orientation&&(options.transforms=function getTransforms(orientation){var result={flip:{horizontal:!1,vertical:!1},rotate:0};if(orientation)switch(orientation){case 2:result.flip.horizontal=!0;break;case 3:result.rotate=-180;break;case 4:result.flip.vertical=!0;break;case 5:result.rotate=90,result.flip.vertical=!0;break;case 6:result.rotate=90;break;case 7:result.rotate=90,result.flip.horizontal=!0;break;case 8:result.rotate=-90}return result}(orientation)),options}function loadImage(src,settings){return void 0===settings&&(settings={}),function parseImage(src,settings){void 0===settings&&(settings={});var checkOrientation=settings.checkOrientation,parse=settings.parse;return new Promise(function(resolve){checkOrientation||parse?getImageData(src).then(function(data){var orientation=resetAndGetOrientation(data);resolve(getImage(data?{src:src,arrayBuffer:data,orientation:orientation}:{src:src,arrayBuffer:null,orientation:null}))}).catch(function(error){console.warn(error),resolve(getImage({src:src}))}):resolve(getImage({src:src}))})}(src,(0,tslib__WEBPACK_IMPORTED_MODULE_1__.C3)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.C3)({},settings),{crossOrigin:(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.qm)(src)&&settings.crossOrigin})).then(function(options){return new Promise(function(resolve,reject){(function createImage(src,settings){return void 0===settings&&(settings={}),new Promise(function(resolve,reject){var image=document.createElement("img");settings.crossOrigin&&(image.crossOrigin=!0!==settings.crossOrigin?settings.crossOrigin:"anonymous"),image.src=src,image.style.visibility="hidden",image.style.position="fixed",document.body.appendChild(image),image.complete?(resolve(image),document.body.removeChild(image)):(image.addEventListener("load",function(){resolve(image),document.body.removeChild(image)}),image.addEventListener("error",function(){reject(null),document.body.removeChild(image)}))})})(options.src,settings).then(function(image){resolve((0,tslib__WEBPACK_IMPORTED_MODULE_1__.C3)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.C3)({},options),{width:image.naturalWidth,height:image.naturalHeight}))}).catch(function(){reject(null)})})})}function getImageStyle(image,state,area,coefficient,transitions){void 0===transitions&&(transitions=null);var optimalImageSize=image.width>image.height?{width:Math.min(512,image.width),height:Math.min(512,image.width)/(image.width/image.height)}:{height:Math.min(512,image.height),width:Math.min(512,image.height)*(image.width/image.height)},actualImageSize=(0,_service_helpers_js__WEBPACK_IMPORTED_MODULE_2__.MR)(state),imageTransforms={rotate:state.transforms.rotate,flip:{horizontal:state.transforms.flip.horizontal,vertical:state.transforms.flip.vertical},translateX:area.left/coefficient,translateY:area.top/coefficient,scale:1/coefficient},compensations_rotate={left:(optimalImageSize.width-actualImageSize.width)/(2*coefficient),top:(optimalImageSize.height-actualImageSize.height)/(2*coefficient)},compensations_scale={left:(1-1/coefficient)*optimalImageSize.width/2,top:(1-1/coefficient)*optimalImageSize.height/2},transforms=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.C3)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.C3)({},imageTransforms),{scale:imageTransforms.scale*(image.width/optimalImageSize.width)}),result={width:optimalImageSize.width+"px",height:optimalImageSize.height+"px",left:"0px",top:"0px",transition:"none",transform:"translate3d("+(-compensations_rotate.left-compensations_scale.left-imageTransforms.translateX)+"px, "+(-compensations_rotate.top-compensations_scale.top-imageTransforms.translateY)+"px, 0px)"+getStyleTransforms(transforms),willChange:"none"};return transitions&&transitions.active&&(result.willChange="transform",result.transition=transitions.duration+"ms "+transitions.timingFunction),result}function getBackgroundStyle(image,state,transitions){return void 0===transitions&&(transitions=null),image&&state&&state.visibleArea?getImageStyle(image,state,state.visibleArea,(0,_service_helpers_js__WEBPACK_IMPORTED_MODULE_2__.S)(state),transitions):{}}function getPreviewStyle(image,state,size,transitions){return void 0===transitions&&(transitions=null),image&&state&&state.visibleArea&&state.coordinates?getImageStyle(image,state,state.coordinates,(0,_service_utils_js__WEBPACK_IMPORTED_MODULE_3__.GI)(state.coordinates)>(0,_service_utils_js__WEBPACK_IMPORTED_MODULE_3__.GI)(size)?state.coordinates.width/size.width:state.coordinates.height/size.height,transitions):{}}},"../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/helpers.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A7:function(){return getStencilCoordinates},G2:function(){return getDefaultVisibleArea},Kc:function(){return getDefaultCoordinates},MR:function(){return getTransformedImageSize},Qj:function(){return getAreaSizeRestrictions},S:function(){return getCoefficient},SU:function(){return getSizeRestrictions},WC:function(){return getAreaPositionRestrictions},Wu:function(){return getRoundedCoordinates},a4:function(){return isConsistentState},iY:function(){return getDefaultTransforms},sh:function(){return getMinimumSize},u2:function(){return getAspectRatio},w1:function(){return isInitializedState},yY:function(){return getPositionRestrictions}});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs"),_utils_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/utils/index.js"),_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/utils.js"),_sizeRestrictions_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/sizeRestrictions.js");function isInitializedState(state){return Boolean(state&&state.visibleArea&&state.coordinates)}function getAreaSizeRestrictions(state,settings){return(0,_sizeRestrictions_js__WEBPACK_IMPORTED_MODULE_0__.kR)(state,settings)}function getAreaPositionRestrictions(state,settings){return(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(settings.areaPositionRestrictions)?settings.areaPositionRestrictions(state,settings):settings.areaPositionRestrictions}function getSizeRestrictions(state,settings){return(0,_sizeRestrictions_js__WEBPACK_IMPORTED_MODULE_0__.g7)(state,settings)}function getPositionRestrictions(state,settings){return(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(settings.positionRestrictions)?settings.positionRestrictions(state,settings):settings.positionRestrictions}function getCoefficient(state){return state.visibleArea?state.visibleArea.width/state.boundary.width:0}function getStencilCoordinates(state){if(isInitializedState(state)){var _a=state.coordinates,width=_a.width,height=_a.height,left=_a.left,top_1=_a.top,coefficient=getCoefficient(state);return{width:width/coefficient,height:height/coefficient,left:(left-state.visibleArea.left)/coefficient,top:(top_1-state.visibleArea.top)/coefficient}}return(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.eE)()}function getAspectRatio(state,settings){return(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.QX)((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(settings.aspectRatio)?settings.aspectRatio(state,settings):settings.aspectRatio)}function getDefaultCoordinates(state,settings){return(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(settings.defaultCoordinates)?settings.defaultCoordinates(state,settings):settings.defaultCoordinates}function getDefaultVisibleArea(state,settings){return(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(settings.defaultVisibleArea)?settings.defaultVisibleArea(state,settings):settings.defaultVisibleArea}function getDefaultTransforms(state,settings){var transforms=(0,tslib__WEBPACK_IMPORTED_MODULE_3__.C3)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.C3)({},state.transforms),{flip:(0,tslib__WEBPACK_IMPORTED_MODULE_3__.C3)({},state.transforms.flip)});if(settings.defaultTransforms){var defaultTransforms=(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(settings.defaultTransforms)?settings.defaultTransforms(state,settings):settings.defaultTransforms;(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Ib)(defaultTransforms.rotate)&&(transforms.rotate=defaultTransforms.rotate),defaultTransforms.flip&&((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.am)(defaultTransforms.flip.horizontal)&&(transforms.flip.horizontal=defaultTransforms.flip.horizontal),(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.am)(defaultTransforms.flip.vertical)&&(transforms.flip.vertical=defaultTransforms.flip.vertical))}return transforms}function getTransformedImageSize(state){return state.imageSize&&state.imageSize.width&&state.imageSize.height?(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.Co)(state.imageSize,state.transforms.rotate):{width:0,height:0}}function getMinimumSize(state){return state.coordinates?Math.min(state.coordinates.width,state.coordinates.height,20*getCoefficient(state)):1}function getRoundedCoordinates(state,settings){if(isInitializedState(state)){var sizeRestrictions=getSizeRestrictions(state,settings),positionRestrictions=getPositionRestrictions(state,settings),roundCoordinates={width:Math.round(state.coordinates.width),height:Math.round(state.coordinates.height),left:Math.round(state.coordinates.left),top:Math.round(state.coordinates.top)};return roundCoordinates.width>sizeRestrictions.maxWidth?roundCoordinates.width=Math.floor(state.coordinates.width):roundCoordinates.width<sizeRestrictions.minWidth&&(roundCoordinates.width=Math.ceil(state.coordinates.width)),roundCoordinates.height>sizeRestrictions.maxHeight?roundCoordinates.height=Math.floor(state.coordinates.height):roundCoordinates.height<sizeRestrictions.minHeight&&(roundCoordinates.height=Math.ceil(state.coordinates.height)),(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.Ko)(roundCoordinates,positionRestrictions)}return null}function isConsistentState(state,settings){return!isInitializedState(state)||!(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.sX)((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.GI)(state.coordinates),getAspectRatio(state,settings))&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.Q3)(state.visibleArea,getAreaSizeRestrictions(state,settings))&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.Q3)(state.coordinates,getSizeRestrictions(state,settings))&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.e6)(state.visibleArea,getAreaPositionRestrictions(state,settings))&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.e6)(state.coordinates,getPositionRestrictions(state,settings))}},"../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/sizeRestrictions.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{QT:function(){return mergeSizeRestrictions},g7:function(){return calculateSizeRestrictions},kR:function(){return calculateAreaSizeRestrictions}});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs"),_utils_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/utils/index.js"),_utils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/utils.js"),_helpers_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/helpers.js");function reconcileSizeRestrictions(sizeRestrictions){var restrictions=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.C3)({},sizeRestrictions);return restrictions.minWidth>restrictions.maxWidth&&(restrictions.minWidth=restrictions.maxWidth),restrictions.minHeight>restrictions.maxHeight&&(restrictions.minHeight=restrictions.maxHeight),restrictions}function mergeSizeRestrictions(a,b){var first=a,second=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.C3)({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},b);return reconcileSizeRestrictions({maxHeight:Math.min(first.maxHeight,second.maxHeight),minHeight:Math.max(first.minHeight,second.minHeight),maxWidth:Math.min(first.maxWidth,second.maxWidth),minWidth:Math.max(first.minWidth,second.minWidth)})}function calculateSizeRestrictions(state,settings){var sizeRestrictions=(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(settings.sizeRestrictions)?settings.sizeRestrictions(state,settings):settings.sizeRestrictions,positionRestrictions=(0,_helpers_js__WEBPACK_IMPORTED_MODULE_2__.yY)(state,settings),restrictions={minWidth:(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.g5)(sizeRestrictions.minWidth)?(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Ii)(sizeRestrictions.minWidth):0,minHeight:(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.g5)(sizeRestrictions.minHeight)?(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Ii)(sizeRestrictions.minHeight):0,maxWidth:(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.g5)(sizeRestrictions.maxWidth)?(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Ii)(sizeRestrictions.maxWidth):1/0,maxHeight:(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.g5)(sizeRestrictions.maxHeight)?(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Ii)(sizeRestrictions.maxHeight):1/0};return void 0!==positionRestrictions.left&&void 0!==positionRestrictions.right&&(restrictions.maxWidth=Math.min(restrictions.maxWidth,positionRestrictions.right-positionRestrictions.left)),void 0!==positionRestrictions.bottom&&void 0!==positionRestrictions.top&&(restrictions.maxHeight=Math.min(restrictions.maxHeight,positionRestrictions.bottom-positionRestrictions.top)),reconcileSizeRestrictions(restrictions)}function calculateAreaSizeRestrictions(state,settings){var sizeRestrictions=(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(settings.areaSizeRestrictions)?settings.areaSizeRestrictions(state,settings):settings.areaSizeRestrictions;return sizeRestrictions.maxWidth<1/0&&sizeRestrictions.maxHeight<1/0&&((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.GI)(state.boundary)>sizeRestrictions.maxWidth/sizeRestrictions.maxHeight?sizeRestrictions.maxHeight=sizeRestrictions.maxWidth/(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.GI)(state.boundary):sizeRestrictions.maxWidth=sizeRestrictions.maxHeight*(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.GI)(state.boundary)),reconcileSizeRestrictions(sizeRestrictions)}},"../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ar:function(){return coordinatesToPositionRestrictions},Co:function(){return rotateSize},ED:function(){return maxScale},GA:function(){return rotatePoint},GI:function(){return ratio},Ko:function(){return moveToPositionRestrictions},Ks:function(){return getCenter},Mv:function(){return getIntersections},Og:function(){return minScale},Pd:function(){return resizeToSizeRestrictions},Q3:function(){return isConsistentSize},Q5:function(){return applyScale},QU:function(){return aspectRatioIntersection},QX:function(){return createAspectRatio},Wc:function(){return mergePositionRestrictions},_A:function(){return getCloserSize},_m:function(){return getOppositeSide},ai:function(){return positionToSizeRestrictions},c3:function(){return applyDirections},cp:function(){return applyMove},e6:function(){return isConsistentPosition},gL:function(){return fitToSizeRestrictions},qo:function(){return fitToPositionRestrictions},qq:function(){return diff},sX:function(){return getBrokenRatio},y8:function(){return inverseMove}});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs"),_constants_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/constants/index.js"),_utils_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/utils/index.js");function diff(firstObject,secondObject){return{left:firstObject.left-secondObject.left,top:firstObject.top-secondObject.top}}function getCenter(object){return{left:object.left+object.width/2,top:object.top+object.height/2}}function getOppositeSide(side){return{left:"right",top:"bottom",right:"left",bottom:"top"}[side]}function sizeDistance(a,b){return Math.pow(a.width-b.width,2)+Math.pow(a.height-b.height,2)}function applyDirections(coordinates,directions){return{left:coordinates.left-directions.left,top:coordinates.top-directions.top,width:coordinates.width+directions.left+directions.right,height:coordinates.height+directions.top+directions.bottom}}function inverseMove(directions){return{left:-directions.left,top:-directions.top}}function applyMove(object,move){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.C3)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.C3)({},object),{left:object.left+move.left,top:object.top+move.top})}function coordinatesToPositionRestrictions(coordinates){return{left:coordinates.left,top:coordinates.top,right:coordinates.left+coordinates.width,bottom:coordinates.top+coordinates.height}}function applyScale(object,factor,center,progress){if(1!==factor){if("left"in object||"top"in object){if(center){var currentCenter=getCenter(object);return{width:object.width*factor,height:object.height*factor,left:object.left+object.width*(1-factor)/2+(center.left-currentCenter.left)*(progress||1-factor),top:object.top+object.height*(1-factor)/2+(center.top-currentCenter.top)*(progress||1-factor)}}return{width:object.width*factor,height:object.height*factor,left:object.left+object.width*(1-factor)/2,top:object.top+object.height*(1-factor)/2}}return{width:object.width*factor,height:object.height*factor}}return object}function ratio(object){return object.width/object.height}function maxScale(size,restrictions){return Math.min(restrictions.maxWidth?restrictions.maxWidth/size.width:1/0,restrictions.maxHeight?restrictions.maxHeight/size.height:1/0)}function minScale(size,restrictions){return Math.max(restrictions.minWidth?restrictions.minWidth/size.width:0,restrictions.minHeight?restrictions.minHeight/size.height:0)}function getBrokenRatio(currentAspectRatio,aspectRatio){var ratioBroken;return aspectRatio.minimum&&(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.ae)(currentAspectRatio,aspectRatio.minimum)?ratioBroken=aspectRatio.minimum:aspectRatio.maximum&&(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mc)(currentAspectRatio,aspectRatio.maximum)&&(ratioBroken=aspectRatio.maximum),ratioBroken}function fitToSizeRestrictions(coordinates,sizeRestrictions){var aspectRatio=ratio(coordinates),scale=1;return sizeRestrictions.minWidth>0&&sizeRestrictions.minHeight>0?aspectRatio>sizeRestrictions.minWidth/sizeRestrictions.minHeight?coordinates.height<sizeRestrictions.minHeight&&(scale=sizeRestrictions.minHeight/coordinates.height):coordinates.width<sizeRestrictions.minWidth&&(scale=sizeRestrictions.minWidth/coordinates.width):sizeRestrictions.minWidth>0?coordinates.width<sizeRestrictions.minWidth&&(scale=sizeRestrictions.minWidth/coordinates.width):sizeRestrictions.minHeight>0&&coordinates.height<sizeRestrictions.minHeight&&(scale=sizeRestrictions.minHeight/coordinates.height),sizeRestrictions.maxWidth<1/0&&sizeRestrictions.maxHeight<1/0?aspectRatio>sizeRestrictions.maxWidth/sizeRestrictions.maxHeight?coordinates.width>sizeRestrictions.maxWidth&&(scale=sizeRestrictions.maxWidth/coordinates.width):coordinates.height>sizeRestrictions.maxHeight&&(scale=sizeRestrictions.maxHeight/coordinates.height):sizeRestrictions.maxWidth<1/0?coordinates.width>sizeRestrictions.maxWidth&&(scale=sizeRestrictions.maxWidth/coordinates.width):sizeRestrictions.maxHeight<1/0&&coordinates.height>sizeRestrictions.maxHeight&&(scale=sizeRestrictions.maxHeight/coordinates.height),scale}function getIntersections(object,positionRestrictions){var intersections={left:0,top:0,right:0,bottom:0};return _constants_index_js__WEBPACK_IMPORTED_MODULE_2__.sR.forEach(function(direction){var areaLimit=positionRestrictions[direction],objectLimit=coordinatesToPositionRestrictions(object)[direction];intersections[direction]=void 0!==areaLimit&&void 0!==objectLimit?"left"===direction||"top"===direction?Math.max(0,areaLimit-objectLimit):Math.max(0,objectLimit-areaLimit):0}),intersections}function resizeToSizeRestrictions(coordinates,sizeRestrictions){return applyScale(coordinates,fitToSizeRestrictions(coordinates,sizeRestrictions))}function rotateSize(size,angle){var radians=angle*Math.PI/180;return{width:Math.abs(size.width*Math.cos(radians))+Math.abs(size.height*Math.sin(radians)),height:Math.abs(size.width*Math.sin(radians))+Math.abs(size.height*Math.cos(radians))}}function rotatePoint(point,angle,anchor){var radians=angle*Math.PI/180;return anchor?{left:(point.left-anchor.left)*Math.cos(radians)-(point.top-anchor.top)*Math.sin(radians)+anchor.left,top:(point.left-anchor.left)*Math.sin(radians)+(point.top-anchor.top)*Math.cos(radians)+anchor.top}:{left:point.left*Math.cos(radians)-point.top*Math.sin(radians),top:point.left*Math.sin(radians)+point.top*Math.cos(radians)}}function positionToSizeRestrictions(positionRestrictions){return{minWidth:0,minHeight:0,maxWidth:void 0!==positionRestrictions.right&&void 0!==positionRestrictions.left?positionRestrictions.right-positionRestrictions.left:1/0,maxHeight:void 0!==positionRestrictions.bottom&&void 0!==positionRestrictions.top?positionRestrictions.bottom-positionRestrictions.top:1/0}}function mergePositionRestrictions(a,b){var restrictions={};return _constants_index_js__WEBPACK_IMPORTED_MODULE_2__.sR.forEach(function(direction){var firstDirection=a[direction],secondDirection=b[direction];void 0!==firstDirection&&void 0!==secondDirection?restrictions[direction]="left"===direction||"top"===direction?Math.max(firstDirection,secondDirection):Math.min(firstDirection,secondDirection):void 0!==secondDirection?restrictions[direction]=secondDirection:void 0!==firstDirection&&(restrictions[direction]=firstDirection)}),restrictions}function fitToPositionRestrictions(coordinates,positionRestrictions){var directions={left:0,top:0},intersection=getIntersections(coordinates,positionRestrictions);return intersection.left&&intersection.left>0?directions.left=intersection.left:intersection.right&&intersection.right>0&&(directions.left=-intersection.right),intersection.top&&intersection.top>0?directions.top=intersection.top:intersection.bottom&&intersection.bottom>0&&(directions.top=-intersection.bottom),directions}function moveToPositionRestrictions(coordinates,positionRestrictions){return applyMove(coordinates,fitToPositionRestrictions(coordinates,positionRestrictions))}function aspectRatioIntersection(main,subset){return subset?main?{minimum:Math.min(main.maximum,Math.max(main.minimum,subset.minimum)),maximum:Math.max(main.minimum,Math.min(main.maximum,subset.maximum))}:subset:main}function createAspectRatio(aspectRatio){return void 0===aspectRatio&&(aspectRatio={}),(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Ib)(aspectRatio)?{minimum:aspectRatio,maximum:aspectRatio}:{minimum:(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.g5)(aspectRatio.minimum)?aspectRatio.minimum:0,maximum:(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.g5)(aspectRatio.maximum)?aspectRatio.maximum:1/0}}function isConsistentSize(size,restrictions){return((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Y3)(restrictions.maxWidth)||!(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mc)(size.width,restrictions.maxWidth))&&((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Y3)(restrictions.maxHeight)||!(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mc)(size.height,restrictions.maxHeight))&&((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Y3)(restrictions.minHeight)||!(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.ae)(size.height,restrictions.minHeight))&&((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Y3)(restrictions.minWidth)||!(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.ae)(size.width,restrictions.minWidth))}function isConsistentPosition(coordinates,restrictions){return((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Y3)(restrictions.left)||!(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.ae)(coordinates.left,restrictions.left))&&((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Y3)(restrictions.top)||!(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.ae)(coordinates.top,restrictions.top))&&((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Y3)(restrictions.right)||!(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mc)(coordinates.left+coordinates.width,restrictions.right))&&((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Y3)(restrictions.bottom)||!(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mc)(coordinates.top+coordinates.height,restrictions.bottom))}function getCloserSize(candidates,reference,sizeRestrictions,aspectRatio){var traverse=function(ignoreMinimum){return candidates.reduce(function(minimum,size){var _a=(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(sizeRestrictions)?sizeRestrictions(size):sizeRestrictions,maxHeight=_a.maxHeight,maxWidth=_a.maxWidth,minWidth=_a.minWidth,minHeight=_a.minHeight,preparedAspectRatio=createAspectRatio((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.mg)(aspectRatio)?aspectRatio(size):aspectRatio);return isConsistentSize(size,ignoreMinimum?{maxWidth:maxWidth,maxHeight:maxHeight}:{maxWidth:maxWidth,maxHeight:maxHeight,minWidth:minWidth,minHeight:minHeight})&&!getBrokenRatio(ratio(size),preparedAspectRatio)&&size.width&&size.height&&(!minimum||(0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.ae)(sizeDistance(size,reference),sizeDistance(minimum,reference)))?size:minimum},null)};return traverse()||traverse(!0)}},"../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/types/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var ImageRestriction,Priority;__webpack_require__.d(__webpack_exports__,{W:function(){return Priority},o:function(){return ImageRestriction}}),function(ImageRestriction){ImageRestriction.fillArea="fillArea",ImageRestriction.fitArea="fitArea",ImageRestriction.stencil="stencil",ImageRestriction.none="none"}(ImageRestriction||(ImageRestriction={})),function(Priority){Priority.coordinates="coordinates",Priority.visibleArea="visibleArea"}(Priority||(Priority={}))},"../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/utils/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function getDirectionNames(hDirection,vDirection){var camelCase,snakeCase;return hDirection&&vDirection?(camelCase=""+hDirection+vDirection[0].toUpperCase()+vDirection.slice(1),snakeCase=hDirection+"-"+vDirection):(camelCase=hDirection||vDirection,snakeCase=hDirection||vDirection),{camelCase:camelCase,snakeCase:snakeCase}}function isBlob(url){return/^blob:/.test(url)}function isLocal(url){return isBlob(url)||function isDataUrl(url){return/^data:/.test(url)}(url)}function isCrossOriginURL(url){if(isLocal(url))return!1;var pageLocation=window.location,urlMatch=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(url)||[],urlparts={protocol:urlMatch[1]||"",host:urlMatch[2]||"",port:urlMatch[3]||""},portOf=function(location){return location.port||("http"===(location.protocol||pageLocation.protocol)?80:433)};return!(!urlparts.protocol&&!urlparts.host&&!urlparts.port||Boolean(urlparts.protocol&&urlparts.protocol==pageLocation.protocol&&urlparts.host&&urlparts.host==pageLocation.host&&urlparts.host&&portOf(urlparts)==portOf(pageLocation)))}function isArray(value){return Array.isArray(value)}function isFunction(value){return"function"==typeof value}function isUndefined(obj){return void 0===obj}__webpack_require__.d(__webpack_exports__,{Cu:function(){return debounce},G:function(){return getDirectionNames},IV:function(){return deepCompare},Ib:function(){return isNumber},Ii:function(){return parseNumber},KG:function(){return getOptions},KS:function(){return deepClone},SE:function(){return promiseTimeout},Y3:function(){return isUndefined},Y9:function(){return isObject},Yf:function(){return isBlob},_w:function(){return isLocal},ae:function(){return isLower},am:function(){return isBoolean},c7:function(){return isArray},eE:function(){return emptyCoordinates},g5:function(){return isNumeric},gV:function(){return isCardinalDirection},kh:function(){return isRoughlyEqual},kq:function(){return sign},mc:function(){return isGreater},mg:function(){return isFunction},qm:function(){return isCrossOriginURL},qy:function(){return distance}});var isObject=function(term){return null!==term&&"object"==typeof term};function getOptions(options,defaultScheme,falseScheme){void 0===falseScheme&&(falseScheme={});var result={};return isObject(options)?(Object.keys(defaultScheme).forEach(function(key){isUndefined(options[key])?result[key]=defaultScheme[key]:isObject(defaultScheme[key])?isObject(options[key])?result[key]=getOptions(options[key],defaultScheme[key],falseScheme[key]):result[key]=options[key]?defaultScheme[key]:falseScheme[key]:!0===defaultScheme[key]||!1===defaultScheme[key]?result[key]=Boolean(options[key]):result[key]=options[key]}),result):options?defaultScheme:falseScheme}function parseNumber(number){var parsedNumber=Number(number);return Number.isNaN(parsedNumber)?number:parsedNumber}function isBoolean(value){return!0===value||!1===value}function isNumber(value){return"number"==typeof value}function isNaN(value){return value!=value}function isNumeric(value){return isNumber(value)&&!isNaN(value)||function isString(value){return"string"==typeof value}(value)&&!Number.isNaN(parseFloat(value))&&isFinite(parseFloat(value))}function distance(firstPoint,secondPoint){return Math.sqrt(Math.pow(firstPoint.left-secondPoint.left,2)+Math.pow(firstPoint.top-secondPoint.top,2))}function isRoughlyEqual(a,b,tolerance){return void 0===tolerance&&(tolerance=.001),Math.abs(b-a)<tolerance}function isGreater(a,b,tolerance){return!isRoughlyEqual(a,b,tolerance)&&a>b}function isLower(a,b,tolerance){return!isRoughlyEqual(a,b,tolerance)&&a<b}function sign(value){var number=+value;return 0===number||isNaN(number)?number:number>0?1:-1}function promiseTimeout(timeout){return new Promise(function(resolve){setTimeout(function(){resolve()},timeout)})}function deepClone(obj){if(!isObject(obj))return obj;var result={};return Array.isArray(obj)?result=obj.map(function(item){return deepClone(item)}):Object.keys(obj).forEach(function(key){return result[key]=deepClone(obj[key])}),result}function deepCompare(a,b,tolerance){if(void 0===tolerance&&(tolerance=.001),isNumber(a)&&isNumber(b)&&isRoughlyEqual(a,b,tolerance))return!0;if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var length_1,i=void 0;if(Array.isArray(a)){if((length_1=a.length)!=b.length)return!1;for(i=length_1;0!==i--;)if(!deepCompare(a[i],b[i],tolerance))return!1;return!0}if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();var keys=Object.keys(a);if((length_1=keys.length)!==Object.keys(b).length)return!1;for(i=length_1;0!==i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length_1;0!==i--;){var key=keys[i];if(!deepCompare(a[key],b[key],tolerance))return!1}return!0}return a!=a&&b!=b}function emptyCoordinates(){return{left:0,top:0,width:0,height:0}}function isCardinalDirection(value){return"west"===value||"south"===value||"north"===value||"east"===value}function debounce(callback,delay){var timestamp,timeout;function later(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var last=Date.now()-timestamp,delayValue=isFunction(delay)?delay():delay||0;last<delayValue&&last>=0?timeout=setTimeout(function(){return later.apply(void 0,args)},delayValue-last):callback.apply(void 0,args)}function result(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];timestamp=Date.now(),timeout=setTimeout(function(){return later.apply(void 0,args)},isFunction(delay)?delay():delay||0)}return result.clear=function(){clearTimeout(timeout)},result}},"../../../node_modules/.pnpm/react-advanced-cropper@0.20.1_react@18.2.0/node_modules/react-advanced-cropper/dist/index.esm-bundler.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{E3U:function(){return CircleStencil},glb:function(){return Cropper},kZJ:function(){return CropperPreview},AvD:function(){return CropperSource},UTL:function(){return RectangleStencil},wdC:function(){return mergeRefs},MLM:function(){return useUpdateEffect}});var tslib_es6=__webpack_require__("../../../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs"),react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");function hasInteractions(interactions){return interactions.moveCoordinates||interactions.resizeCoordinates||interactions.transformImage.move||interactions.transformImage.rotate||interactions.transformImage.flip||interactions.transformImage.scale}var utils=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/utils/index.js"),helpers=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/helpers.js");function copyState(state){return(0,utils.KS)(state)}var SetCoordinatesMode,service_utils=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/utils.js");function approximateSize(params){var width=params.width,height=params.height,sizeRestrictions=params.sizeRestrictions||{minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},aspectRatio=(0,service_utils.QX)(params.aspectRatio),coordinates={width:Math.max(sizeRestrictions.minWidth,Math.min(sizeRestrictions.maxWidth,width)),height:Math.max(sizeRestrictions.minHeight,Math.min(sizeRestrictions.maxHeight,height))},candidates=[coordinates];return aspectRatio&&[aspectRatio.minimum,aspectRatio.maximum].forEach(function(ratio){ratio&&candidates.push({width:coordinates.width,height:coordinates.width/ratio},{width:coordinates.height*ratio,height:coordinates.height})}),candidates=candidates.map(function(candidate){return(0,service_utils.Pd)(candidate,sizeRestrictions)}),(0,service_utils._A)(candidates,{width:width,height:height},sizeRestrictions,aspectRatio)}function fitVisibleArea(state,settings){var result=copyState(state);if(state.visibleArea){var areaSizeRestrictions=(0,helpers.Qj)(state,settings);result.visibleArea=(0,tslib_es6.C3)((0,tslib_es6.C3)({},state.visibleArea),approximateSize({width:state.visibleArea.width,height:state.visibleArea.height,aspectRatio:{minimum:(0,service_utils.GI)(result.boundary),maximum:(0,service_utils.GI)(result.boundary)},sizeRestrictions:areaSizeRestrictions})),result.visibleArea=(0,service_utils.cp)(result.visibleArea,(0,service_utils.qq)((0,service_utils.Ks)(state.visibleArea),(0,service_utils.Ks)(result.visibleArea))),result.visibleArea=(0,service_utils.Ko)(result.visibleArea,(0,helpers.WC)(result,settings))}return result}function moveCoordinatesAlgorithm(coordinates,directions,positionRestrictions){var movedCoordinates=(0,service_utils.cp)(coordinates,directions);return positionRestrictions?(0,service_utils.Ko)(movedCoordinates,positionRestrictions):movedCoordinates}function setCoordinates(state,settings,transform,mode){void 0===mode&&(mode=!0);var currentMode=!1===mode?SetCoordinatesMode.unsafe:!0===mode?SetCoordinatesMode.zoom:mode,aspectRatio=(0,helpers.u2)(state,settings),sizeRestrictions=(0,helpers.SU)(state,settings);state.visibleArea&&currentMode===SetCoordinatesMode.limit&&(sizeRestrictions=(0,tslib_es6.C3)((0,tslib_es6.C3)({},sizeRestrictions),{minWidth:Math.min(state.visibleArea.width,sizeRestrictions.minWidth),minHeight:Math.min(state.visibleArea.height,sizeRestrictions.minHeight),maxWidth:Math.min(state.visibleArea.width,sizeRestrictions.maxWidth),maxHeight:Math.min(state.visibleArea.height,sizeRestrictions.maxHeight)}));var positionRestrictions=(0,helpers.yY)(state,settings);state.visibleArea&&currentMode===SetCoordinatesMode.limit&&(positionRestrictions=(0,service_utils.Wc)(positionRestrictions,(0,service_utils.Ar)(state.visibleArea)));var move=function(prevCoordinates,newCoordinates){return moveCoordinatesAlgorithm(prevCoordinates,{left:newCoordinates.left-(prevCoordinates.left||0),top:newCoordinates.top-(prevCoordinates.top||0)},positionRestrictions)},coordinates=state.coordinates?(0,tslib_es6.C3)({},state.coordinates):(0,utils.eE)();(Array.isArray(transform)?transform:[transform]).forEach(function(transform){var changes;(changes="function"==typeof transform?transform((0,tslib_es6.C3)((0,tslib_es6.C3)({},state),{coordinates:coordinates}),settings):transform)&&((0,utils.Y3)(changes.width)&&(0,utils.Y3)(changes.height)||(coordinates=function(prevCoordinates,newCoordinates){var coordinates=(0,tslib_es6.C3)((0,tslib_es6.C3)((0,tslib_es6.C3)({},prevCoordinates),approximateSize({width:newCoordinates.width,height:newCoordinates.height,sizeRestrictions:sizeRestrictions,aspectRatio:aspectRatio})),{left:0,top:0});return move(coordinates,{left:prevCoordinates.left||0,top:prevCoordinates.top||0})}(coordinates,(0,tslib_es6.C3)((0,tslib_es6.C3)({},coordinates),changes))),(0,utils.Y3)(changes.left)&&(0,utils.Y3)(changes.top)||(coordinates=move(coordinates,(0,tslib_es6.C3)((0,tslib_es6.C3)({},coordinates),changes))))});var result=(0,tslib_es6.C3)((0,tslib_es6.C3)({},copyState(state)),{coordinates:coordinates});if(result.visibleArea&&currentMode===SetCoordinatesMode.zoom){var widthIntersections=Math.max(0,result.coordinates.width-result.visibleArea.width),heightIntersections=Math.max(0,result.coordinates.height-result.visibleArea.height),areaSizeRestrictions=(0,helpers.Qj)(state,settings),scale=widthIntersections>heightIntersections?result.coordinates.width/result.visibleArea.width:result.coordinates.height/result.visibleArea.height;return scale>1&&(result.visibleArea=(0,service_utils.Q5)(result.visibleArea,Math.min(scale,(0,service_utils.ED)(result.visibleArea,areaSizeRestrictions)))),result.visibleArea=(0,service_utils.cp)(result.visibleArea,(0,service_utils.y8)((0,service_utils.qo)(result.coordinates,(0,service_utils.Ar)(result.visibleArea)))),fitVisibleArea(result,settings)}return result}function fitCoordinates(state,settings){if(state.coordinates){var result=copyState(state),aspectRatio=(0,helpers.u2)(state,settings),sizeRestrictions=(0,helpers.SU)(state,settings);return result.coordinates=(0,tslib_es6.C3)((0,tslib_es6.C3)({},state.coordinates),approximateSize({width:state.coordinates.width,height:state.coordinates.height,aspectRatio:aspectRatio,sizeRestrictions:state.visibleArea?{maxWidth:Math.min(state.visibleArea.width,sizeRestrictions.maxWidth),maxHeight:Math.min(state.visibleArea.height,sizeRestrictions.maxHeight),minHeight:Math.min(state.visibleArea.height,sizeRestrictions.minHeight),minWidth:Math.min(state.visibleArea.width,sizeRestrictions.minWidth)}:sizeRestrictions})),result.coordinates=(0,service_utils.cp)(result.coordinates,(0,service_utils.qq)((0,service_utils.Ks)(state.coordinates),(0,service_utils.Ks)(result.coordinates))),result.coordinates=(0,service_utils.Ko)(result.coordinates,state.visibleArea?(0,service_utils.Wc)((0,service_utils.Ar)(state.visibleArea),(0,helpers.yY)(result,settings)):(0,helpers.yY)(result,settings)),result}return state}function setVisibleArea(state,settings,visibleArea,safe){void 0===safe&&(safe=!0);var result=(0,tslib_es6.C3)((0,tslib_es6.C3)({},copyState(state)),{visibleArea:visibleArea});return result=fitVisibleArea(result,settings),safe&&(result=fitCoordinates(result,settings)),result}!function(SetCoordinatesMode){SetCoordinatesMode.limit="limit",SetCoordinatesMode.zoom="zoom",SetCoordinatesMode.unsafe="unsafe"}(SetCoordinatesMode||(SetCoordinatesMode={}));var types=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/types/index.js");function createState(options,settings){var _a,_b,_c,_d,_e,boundary=options.boundary,image=options.image,state={boundary:{width:boundary.width,height:boundary.height},imageSize:{width:image.width,height:image.height},transforms:{rotate:(null===(_a=image.transforms)||void 0===_a?void 0:_a.rotate)||0,flip:{horizontal:(null===(_c=null===(_b=image.transforms)||void 0===_b?void 0:_b.flip)||void 0===_c?void 0:_c.horizontal)||!1,vertical:(null===(_e=null===(_d=image.transforms)||void 0===_d?void 0:_d.flip)||void 0===_e?void 0:_e.vertical)||!1}},visibleArea:null,coordinates:null};return settings.defaultTransforms&&(state.transforms=(0,helpers.iY)(state,settings)),state=settings.priority===types.W.visibleArea?setCoordinates(state=setVisibleArea(state,settings,(0,helpers.G2)(state,settings),!1),settings,(0,helpers.Kc)(state,settings),SetCoordinatesMode.limit):setVisibleArea(state=setCoordinates(state,settings,(0,helpers.Kc)(state,settings),SetCoordinatesMode.unsafe),settings,(0,helpers.G2)(state,settings),!0)}function moveCoordinates(state,settings,directions){if((0,helpers.w1)(state)){var result=copyState(state);return result.coordinates=(0,service_utils.cp)(result.coordinates,directions),result.coordinates=(0,service_utils.Ko)(result.coordinates,(0,service_utils.Wc)((0,service_utils.Ar)(result.visibleArea),(0,helpers.yY)(result,settings))),result}return state}var constants=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/constants/index.js");function fitDirections(_a){var coordinates=_a.coordinates,directions=_a.directions,positionRestrictions=_a.positionRestrictions,sizeRestrictions=_a.sizeRestrictions,preserveRatio=_a.preserveRatio,allowedDirections=_a.allowedDirections,_b=_a.compensate,compensate=void 0===_b||_b,fittedDirections=(0,tslib_es6.C3)({},directions),currentWidth=(0,service_utils.c3)(coordinates,fittedDirections).width,currentHeight=(0,service_utils.c3)(coordinates,fittedDirections).height;currentWidth<0&&(fittedDirections.left<0&&fittedDirections.right<0?(fittedDirections.left=-(coordinates.width-sizeRestrictions.minWidth)/(fittedDirections.left/fittedDirections.right),fittedDirections.right=-(coordinates.width-sizeRestrictions.minWidth)/(fittedDirections.right/fittedDirections.left)):fittedDirections.left<0?fittedDirections.left=-(coordinates.width-sizeRestrictions.minWidth):fittedDirections.right<0&&(fittedDirections.right=-(coordinates.width-sizeRestrictions.minWidth))),currentHeight<0&&(fittedDirections.top<0&&fittedDirections.bottom<0?(fittedDirections.top=-(coordinates.height-sizeRestrictions.minHeight)/(fittedDirections.top/fittedDirections.bottom),fittedDirections.bottom=-(coordinates.height-sizeRestrictions.minHeight)/(fittedDirections.bottom/fittedDirections.top)):fittedDirections.top<0?fittedDirections.top=-(coordinates.height-sizeRestrictions.minHeight):fittedDirections.bottom<0&&(fittedDirections.bottom=-(coordinates.height-sizeRestrictions.minHeight)));var breaks=(0,service_utils.Mv)((0,service_utils.c3)(coordinates,fittedDirections),positionRestrictions),canBeCompensated=constants.sR.every(function(direction){return!(0,utils.mc)(breaks[(0,service_utils._m)(direction)],0)||allowedDirections[direction]});compensate&&canBeCompensated&&(breaks.left&&breaks.left>0&&0===breaks.right?(fittedDirections.right+=breaks.left,fittedDirections.left-=breaks.left):breaks.right&&breaks.right>0&&0===breaks.left&&(fittedDirections.left+=breaks.right,fittedDirections.right-=breaks.right),breaks.top&&breaks.top>0&&0===breaks.bottom?(fittedDirections.bottom+=breaks.top,fittedDirections.top-=breaks.top):breaks.bottom&&breaks.bottom>0&&0===breaks.top&&(fittedDirections.top+=breaks.bottom,fittedDirections.bottom-=breaks.bottom),breaks=(0,service_utils.Mv)((0,service_utils.c3)(coordinates,fittedDirections),positionRestrictions));var maxResize={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(constants.sR.forEach(function(direction){var intersection=breaks[direction];intersection&&fittedDirections[direction]&&(maxResize[direction]=Math.max(0,1-intersection/fittedDirections[direction]))}),preserveRatio){var multiplier_1=Math.min.apply(Math,constants.sR.map(function(direction){return maxResize[direction]}));multiplier_1!==1/0&&constants.sR.forEach(function(direction){fittedDirections[direction]*=multiplier_1})}else constants.sR.forEach(function(direction){maxResize[direction]!==1/0&&(fittedDirections[direction]*=maxResize[direction])});if(currentWidth=(0,service_utils.c3)(coordinates,fittedDirections).width,currentHeight=(0,service_utils.c3)(coordinates,fittedDirections).height,fittedDirections.right+fittedDirections.left&&(currentWidth>sizeRestrictions.maxWidth?maxResize.width=(sizeRestrictions.maxWidth-coordinates.width)/(fittedDirections.right+fittedDirections.left):currentWidth<sizeRestrictions.minWidth&&(maxResize.width=(sizeRestrictions.minWidth-coordinates.width)/(fittedDirections.right+fittedDirections.left))),fittedDirections.bottom+fittedDirections.top&&(currentHeight>sizeRestrictions.maxHeight?maxResize.height=(sizeRestrictions.maxHeight-coordinates.height)/(fittedDirections.bottom+fittedDirections.top):currentHeight<sizeRestrictions.minHeight&&(maxResize.height=(sizeRestrictions.minHeight-coordinates.height)/(fittedDirections.bottom+fittedDirections.top))),preserveRatio){var multiplier_2=Math.min(maxResize.width,maxResize.height);multiplier_2!==1/0&&constants.sR.forEach(function(direction){fittedDirections[direction]*=multiplier_2})}else maxResize.width!==1/0&&constants.Sc.forEach(function(direction){fittedDirections[direction]*=maxResize.width}),maxResize.height!==1/0&&constants.UD.forEach(function(direction){fittedDirections[direction]*=maxResize.height});return fittedDirections}function distributeOverlap(overlap,first,second){return(0,utils.kh)(first+second,0)?overlap/2:(0,utils.kh)(first,0)?0:(0,utils.kh)(second,0)?overlap:overlap*Math.abs(first/(first+second))}function anchorToMassPoint(coordinates,anchor){var plainAnchor=anchor.toLowerCase();return{left:coordinates.left+coordinates.width*(-1!==plainAnchor.indexOf("west")?1:-1!==plainAnchor.indexOf("east")?0:.5),top:coordinates.top+coordinates.height*(-1!==plainAnchor.indexOf("north")?1:-1!==plainAnchor.indexOf("south")?0:.5)}}function anchorToAllowedDirections(anchor){var plainAnchor=anchor.toLowerCase();return{left:-1===plainAnchor.indexOf("east"),top:-1===plainAnchor.indexOf("south"),right:-1===plainAnchor.indexOf("west"),bottom:-1===plainAnchor.indexOf("north")}}function anchoredResizeCoordinatesAlgorithm(coordinates,anchor,directions,options,limitations){var reference=options.reference,resizeDirections=function anchorMoveToResizeDirections(anchor,directions){var plainAnchor=anchor.toLowerCase(),normalizedDirections={left:-1===plainAnchor.indexOf("west")?directions.left:-directions.left,top:-directions.top,right:directions.left,bottom:directions.top};["north","south","center"].every(function(el){return-1===plainAnchor.indexOf(el)})&&(normalizedDirections.top=0,normalizedDirections.bottom=0),["west","east","center"].every(function(el){return-1===plainAnchor.indexOf(el)})&&(normalizedDirections.left=0,normalizedDirections.right=0);var allowedDirections=anchorToAllowedDirections(anchor);return constants.sR.forEach(function(direction){allowedDirections[direction]||(normalizedDirections[direction]=0)}),normalizedDirections}(anchor,directions),allowedDirections=anchorToAllowedDirections(anchor),result=function resizeCoordinatesAlgorithm(coordinates,directions,options,limitations){var aspectRatio=limitations.aspectRatio,positionRestrictions=limitations.positionRestrictions,sizeRestrictions=limitations.sizeRestrictions,actualCoordinates=(0,tslib_es6.C3)({},coordinates);directions=(0,tslib_es6.C3)({},directions);var allowedDirections=options.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};coordinates.width<sizeRestrictions.minWidth&&(directions.left=0,directions.right=0),coordinates.height<sizeRestrictions.minHeight&&(directions.top=0,directions.bottom=0),constants.sR.forEach(function(direction){allowedDirections[direction]||(directions[direction]=0)}),directions=fitDirections({coordinates:actualCoordinates,directions:directions,sizeRestrictions:sizeRestrictions,positionRestrictions:positionRestrictions,allowedDirections:allowedDirections});var currentWidth=(0,service_utils.c3)(actualCoordinates,directions).width,currentHeight=(0,service_utils.c3)(actualCoordinates,directions).height,ratioBroken=options.preserveAspectRatio?(0,service_utils.GI)(actualCoordinates):(0,service_utils.sX)(currentWidth/currentHeight,aspectRatio);if(ratioBroken){var respectDirection=options.respectDirection;if("width"!==respectDirection&&"height"!==respectDirection&&(respectDirection=actualCoordinates.width>=actualCoordinates.height||1===ratioBroken?"width":"height"),"width"===respectDirection){var overlapHeight=currentWidth/ratioBroken-actualCoordinates.height;if(allowedDirections.top&&allowedDirections.bottom){var top_1=directions.top,bottom=directions.bottom;directions.bottom=distributeOverlap(overlapHeight,bottom,top_1),directions.top=distributeOverlap(overlapHeight,top_1,bottom)}else allowedDirections.bottom?directions.bottom=overlapHeight:allowedDirections.top?directions.top=overlapHeight:allowedDirections.right?directions.right=0:allowedDirections.left&&(directions.left=0)}else if("height"===respectDirection){var overlapWidth=actualCoordinates.width-currentHeight*ratioBroken;if(allowedDirections.left&&allowedDirections.right){var left=directions.left,right=directions.right;directions.left=-distributeOverlap(overlapWidth,left,right),directions.right=-distributeOverlap(overlapWidth,right,left)}else allowedDirections.left?directions.left=-overlapWidth:allowedDirections.right?directions.right=-overlapWidth:allowedDirections.top?directions.top=0:allowedDirections.bottom&&(directions.bottom=0)}directions=fitDirections({directions:directions,coordinates:actualCoordinates,sizeRestrictions:sizeRestrictions,positionRestrictions:positionRestrictions,preserveRatio:!0,compensate:options.compensate,allowedDirections:allowedDirections})}return currentWidth=(0,service_utils.c3)(actualCoordinates,directions).width,currentHeight=(0,service_utils.c3)(actualCoordinates,directions).height,(ratioBroken=options.preserveAspectRatio?(0,service_utils.GI)(actualCoordinates):(0,service_utils.sX)(currentWidth/currentHeight,aspectRatio))&&(0,utils.mc)(Math.abs(ratioBroken-currentWidth/currentHeight),0)&&constants.sR.forEach(function(direction){directions[direction]=0}),moveCoordinatesAlgorithm({width:coordinates.width+directions.right+directions.left,height:coordinates.height+directions.top+directions.bottom,left:coordinates.left,top:coordinates.top},{left:-directions.left,top:-directions.top},positionRestrictions)}(coordinates,resizeDirections,(0,tslib_es6.C3)((0,tslib_es6.C3)({},options),{allowedDirections:allowedDirections}),limitations);return reference&&(result=(0,service_utils.cp)(result,(0,service_utils.qq)(anchorToMassPoint(reference,anchor),anchorToMassPoint(result,anchor)))),(0,service_utils.Ko)(result,limitations.positionRestrictions)}function resizeCoordinates(state,settings,anchor,directions,options){var minimumSize=(0,helpers.sh)(state),sizeRestrictions=(0,helpers.SU)(state,settings);return(0,helpers.w1)(state)?(0,tslib_es6.C3)((0,tslib_es6.C3)({},copyState(state)),{coordinates:anchoredResizeCoordinatesAlgorithm(state.coordinates,anchor,directions,options,{positionRestrictions:(0,service_utils.Wc)((0,helpers.yY)(state,settings),(0,service_utils.Ar)(state.visibleArea)),sizeRestrictions:{maxWidth:Math.min(sizeRestrictions.maxWidth,state.visibleArea.width),maxHeight:Math.min(sizeRestrictions.maxHeight,state.visibleArea.height),minWidth:Math.max(Math.min(sizeRestrictions.minWidth,state.visibleArea.width),minimumSize),minHeight:Math.max(Math.min(sizeRestrictions.minHeight,state.visibleArea.height),minimumSize)},aspectRatio:(0,helpers.u2)(state,settings)})}):state}function setBoundary(state,settings,boundary){var result=(0,tslib_es6.C3)((0,tslib_es6.C3)({},copyState(state)),{boundary:boundary});if(result.visibleArea&&result.coordinates&&state.visibleArea){result.visibleArea.height=result.visibleArea.width/(0,service_utils.GI)(boundary),result.visibleArea.top+=(state.visibleArea.height-result.visibleArea.height)/2;var sizeRestrictions=(0,helpers.SU)(result,settings);(Math.max(sizeRestrictions.minHeight,result.coordinates.height)-result.visibleArea.height>0||Math.max(sizeRestrictions.minWidth,result.coordinates.width)-result.visibleArea.width>0)&&(result.visibleArea=(0,service_utils.Q5)(result.visibleArea,Math.max(Math.max(sizeRestrictions.minHeight,result.coordinates.height)/result.visibleArea.height,Math.max(sizeRestrictions.minWidth,result.coordinates.width)/result.visibleArea.width))),result.visibleArea=(0,service_utils.Pd)(result.visibleArea,(0,helpers.Qj)(result,settings));var move=(0,service_utils.y8)((0,service_utils.qo)(result.coordinates,(0,service_utils.Ar)(result.visibleArea)));result.visibleArea.width<result.coordinates.width&&(move.left=0),result.visibleArea.height<result.coordinates.height&&(move.top=0),result.visibleArea=(0,service_utils.cp)(result.visibleArea,move),result.visibleArea=(0,service_utils.Ko)(result.visibleArea,(0,helpers.WC)(result,settings)),result=fitCoordinates(result,settings)}return result}var service_sizeRestrictions=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/service/sizeRestrictions.js");function transformImage(state,settings,transform){return transform.rotate&&(state=function rotateImageAlgorithm(state,settings,rotate){if((0,helpers.w1)(state)){var result=copyState(state),angle=(0,utils.Ib)(rotate)?rotate:rotate.angle,imageCenter=(0,service_utils.GA)((0,service_utils.Ks)((0,tslib_es6.C3)({left:0,top:0},(0,helpers.MR)(state))),angle);result.transforms.rotate+=angle,result.coordinates=(0,tslib_es6.C3)((0,tslib_es6.C3)({},approximateSize({sizeRestrictions:(0,helpers.SU)(result,settings),aspectRatio:(0,helpers.u2)(result,settings),width:result.coordinates.width,height:result.coordinates.height})),(0,service_utils.GA)((0,service_utils.Ks)(result.coordinates),angle));var center=!(0,utils.Ib)(rotate)&&rotate.center?rotate.center:(0,service_utils.Ks)(state.coordinates),shift=(0,service_utils.qq)((0,service_utils.Ks)(state.coordinates),(0,service_utils.GA)((0,service_utils.Ks)(state.coordinates),angle,center)),imageSize=(0,helpers.MR)(result);return result.coordinates.left-=imageCenter.left-imageSize.width/2+result.coordinates.width/2-shift.left,result.coordinates.top-=imageCenter.top-imageSize.height/2+result.coordinates.height/2-shift.top,result.visibleArea=(0,service_utils.Pd)(result.visibleArea,(0,service_sizeRestrictions.QT)((0,helpers.Qj)(result,settings),{minWidth:result.coordinates.width,minHeight:result.coordinates.height})),result.coordinates=(0,service_utils.Ko)(result.coordinates,(0,helpers.yY)(result,settings)),result.visibleArea=(0,service_utils.cp)(result.visibleArea,(0,service_utils.qq)((0,service_utils.Ks)(result.coordinates),(0,service_utils.Ks)(state.coordinates))),result.visibleArea=(0,service_utils.Ko)(result.visibleArea,(0,helpers.WC)(result,settings)),result}return state}(state,settings,transform.rotate)),transform.flip&&(state=function flipImageAlgorithm(state,settings,horizontal,vertical){if((0,helpers.w1)(state)){var result=copyState(state),rotate=state.transforms.rotate,imageSize=(0,helpers.MR)(state),changed={horizontal:horizontal,vertical:vertical};if(changed.horizontal||changed.vertical){var imageCenter=(0,service_utils.GA)({left:imageSize.width/2,top:imageSize.height/2},-rotate),oldCenter=(0,service_utils.GA)((0,service_utils.Ks)(result.coordinates),-rotate),newCenter=(0,service_utils.GA)({left:changed.horizontal?imageCenter.left-(oldCenter.left-imageCenter.left):oldCenter.left,top:changed.vertical?imageCenter.top-(oldCenter.top-imageCenter.top):oldCenter.top},rotate);result.coordinates=(0,service_utils.cp)(result.coordinates,(0,service_utils.qq)(newCenter,(0,service_utils.Ks)(result.coordinates))),oldCenter=(0,service_utils.GA)((0,service_utils.Ks)(result.visibleArea),-rotate),newCenter=(0,service_utils.GA)({left:changed.horizontal?imageCenter.left-(oldCenter.left-imageCenter.left):oldCenter.left,top:changed.vertical?imageCenter.top-(oldCenter.top-imageCenter.top):oldCenter.top},rotate),result.visibleArea=(0,service_utils.cp)(result.visibleArea,(0,service_utils.qq)(newCenter,(0,service_utils.Ks)(result.visibleArea))),result.visibleArea=(0,service_utils.Ko)(result.visibleArea,(0,helpers.WC)(result,settings))}return changed.horizontal&&(result.transforms.flip.horizontal=!state.transforms.flip.horizontal),changed.vertical&&(result.transforms.flip.vertical=!state.transforms.flip.vertical),result}return state}(state,settings,transform.flip.horizontal,transform.flip.vertical)),(transform.move||transform.scale)&&(state=function transformImageAlgorithm(state,settings,transform){var _a,_b=transform.scale,scale=void 0===_b?1:_b,_c=transform.move,move=void 0===_c?{}:_c;if((0,helpers.w1)(state)){var result=copyState(state),scaleFactor=1/((0,utils.Ib)(scale)?scale:scale.factor),scaleCenter=(0,utils.Ib)(scale)?void 0:scale.center,isAllowedScale=!(0,utils.kh)(scaleFactor,1),areaScale=1,stencilScale=1;result.visibleArea=(0,service_utils.cp)(result.visibleArea,{left:move.left||0,top:move.top||0});var sizeRestrictions=(0,helpers.SU)(result,settings),positionRestrictions=(0,helpers.yY)(result,settings),areaSizeRestrictions=(0,helpers.Qj)(result,settings),scaleRestrictions={stencil:{minimum:Math.max(sizeRestrictions.minWidth?sizeRestrictions.minWidth/result.coordinates.width:0,sizeRestrictions.minHeight?sizeRestrictions.minHeight/result.coordinates.height:0),maximum:Math.min(sizeRestrictions.maxWidth?sizeRestrictions.maxWidth/result.coordinates.width:1/0,sizeRestrictions.maxHeight?sizeRestrictions.maxHeight/result.coordinates.height:1/0,(0,service_utils.ED)(result.coordinates,(0,service_utils.ai)(positionRestrictions)))},area:{maximum:(0,service_utils.ED)(result.visibleArea,areaSizeRestrictions),minimum:(0,service_utils.Og)(result.visibleArea,areaSizeRestrictions)}};scaleFactor&&isAllowedScale&&(scaleFactor<1?(stencilScale=Math.max(scaleFactor,Math.max(scaleRestrictions.area.minimum,scaleRestrictions.stencil.minimum)))>1&&(stencilScale=1):scaleFactor>1&&(stencilScale=Math.min(scaleFactor,Math.min(scaleRestrictions.area.maximum,scaleRestrictions.stencil.maximum)))<1&&(stencilScale=1)),stencilScale&&(result.visibleArea=(0,service_utils.Q5)(result.visibleArea,stencilScale,scaleCenter));var relativeCoordinates={left:state.coordinates.left-state.visibleArea.left,right:state.visibleArea.width+state.visibleArea.left-(state.coordinates.width+state.coordinates.left),top:state.coordinates.top-state.visibleArea.top,bottom:state.visibleArea.height+state.visibleArea.top-(state.coordinates.height+state.coordinates.top)};return result.visibleArea=(0,service_utils.Ko)(result.visibleArea,{left:void 0!==positionRestrictions.left?positionRestrictions.left-relativeCoordinates.left*stencilScale:void 0,top:void 0!==positionRestrictions.top?positionRestrictions.top-relativeCoordinates.top*stencilScale:void 0,bottom:void 0!==positionRestrictions.bottom?positionRestrictions.bottom+relativeCoordinates.bottom*stencilScale:void 0,right:void 0!==positionRestrictions.right?positionRestrictions.right+relativeCoordinates.right*stencilScale:void 0}),result.visibleArea=(0,service_utils.Ko)(result.visibleArea,(0,helpers.WC)(result,settings)),result.coordinates.width=result.coordinates.width*stencilScale,result.coordinates.height=result.coordinates.height*stencilScale,result.coordinates.left=result.visibleArea.left+relativeCoordinates.left*stencilScale,result.coordinates.top=result.visibleArea.top+relativeCoordinates.top*stencilScale,result.coordinates=(0,service_utils.Ko)(result.coordinates,(0,service_utils.Wc)((0,service_utils.Ar)(result.visibleArea),positionRestrictions)),isAllowedScale&&scaleFactor&&(null===(_a=settings.transformImage)||void 0===_a?void 0:_a.adjustStencil)&&(scaleFactor>1?areaScale=Math.min(scaleRestrictions.area.maximum,scaleFactor)/stencilScale:scaleFactor<1&&(areaScale=Math.max(result.coordinates.height/result.visibleArea.height,result.coordinates.width/result.visibleArea.width,scaleFactor/stencilScale)),1!==areaScale&&(result.visibleArea=(0,service_utils.Q5)(result.visibleArea,areaScale,scaleFactor>1?scaleCenter:(0,service_utils.Ks)(result.coordinates)),result.visibleArea=(0,service_utils.Ko)(result.visibleArea,(0,helpers.WC)(result,settings)),result.visibleArea=(0,service_utils.cp)(result.visibleArea,(0,service_utils.y8)((0,service_utils.qo)(result.coordinates,(0,service_utils.Ar)(result.visibleArea)))))),result}return state}(state,settings,transform)),state}function reconcileState(state,settings){if((0,helpers.w1)(state)){var result=copyState(state),aspectRatio=(0,helpers.u2)(state,settings),sizeRestrictions=(0,helpers.SU)(state,settings),areaSizeRestrictions=(0,helpers.Qj)(state,settings),brokenRatio=(0,service_utils.sX)((0,service_utils.GI)(state.coordinates),aspectRatio),desiredSize=brokenRatio?{height:state.coordinates.height,width:state.coordinates.height*brokenRatio}:state.coordinates;result.coordinates=(0,tslib_es6.C3)((0,tslib_es6.C3)({},result.coordinates),approximateSize({width:desiredSize.width,height:desiredSize.height,aspectRatio:aspectRatio,sizeRestrictions:(0,service_sizeRestrictions.QT)(areaSizeRestrictions,sizeRestrictions)})),result.coordinates=(0,service_utils.cp)(result.coordinates,(0,service_utils.qq)((0,service_utils.Ks)(state.coordinates),(0,service_utils.Ks)(result.coordinates)));var scaleModifier=Math.max(result.coordinates.width/result.visibleArea.width,result.coordinates.height/result.visibleArea.height,1);return result.visibleArea=(0,tslib_es6.C3)((0,tslib_es6.C3)({},state.visibleArea),approximateSize({width:state.visibleArea.width*scaleModifier,height:state.visibleArea.height*scaleModifier,aspectRatio:{minimum:(0,service_utils.GI)(result.boundary),maximum:(0,service_utils.GI)(result.boundary)},sizeRestrictions:areaSizeRestrictions})),result.visibleArea=(0,service_utils.cp)(result.visibleArea,(0,service_utils.qq)((0,service_utils.Ks)(state.visibleArea),(0,service_utils.Ks)(result.visibleArea))),result.visibleArea=(0,service_utils.Ko)(result.visibleArea,(0,helpers.WC)(result,settings)),result.coordinates=(0,service_utils.Ko)(result.coordinates,(0,service_utils.Wc)((0,service_utils.Ar)(result.visibleArea),(0,helpers.yY)(result,settings))),result}return state}function normalizeCenter(state,center){var coefficient=(0,helpers.S)(state);return state.visibleArea?{left:center.left*coefficient+state.visibleArea.left,top:center.top*coefficient+state.visibleArea.top}:center}function normalizeFlip(state,flip){if(state){var normalizedAngle=Math.abs(state.transforms.rotate%180);return normalizedAngle<=45||normalizedAngle>=135?flip:{horizontal:flip.vertical,vertical:flip.horizontal}}return flip}function normalizeMoveDirections(state,directions){var coefficient=(0,helpers.S)(state);return{left:(0,utils.Ib)(directions.left)?directions.left*coefficient:0,top:(0,utils.Ib)(directions.top)?directions.top*coefficient:0}}function runCallback(callback,getInstance){if(callback&&getInstance){var instance=getInstance();instance&&callback(instance)}}function runCallbacks(callbacks,getInstance){callbacks.forEach(function(callback){runCallback(callback,getInstance)})}var AbstractCropperInstance=function AbstractCropperInstance(){var _this=this;this.getTransitions=function(){var data=_this.getData(),transitions=_this.getProps().transitions;return(0,tslib_es6.C3)((0,tslib_es6.C3)({},(0,utils.KG)(transitions,{timingFunction:"ease-in-out",duration:350})),{active:data.transitions})},this.getInteractions=function(){var interactions=_this.getData().interactions;return(0,utils.KS)(interactions)},this.hasInteractions=function(){return hasInteractions(_this.getData().interactions)},this.startTransitions=function(){var _a=_this.getProps(),onTransitionsStart=_a.onTransitionsStart,onUpdate=_a.onUpdate,getInstance=_a.getInstance,_b=_this.getData(),transitions=_b.transitions,data=(0,tslib_es6.sX)(_b,["transitions"]);_this.setData((0,tslib_es6.C3)((0,tslib_es6.C3)({},data),{transitions:!0})),transitions||runCallbacks([onTransitionsStart,onUpdate],getInstance),_this.endTransitions()},this.endTransitions=(0,utils.Cu)(function(){var _a=_this.getProps(),onTransitionsEnd=_a.onTransitionsEnd,onUpdate=_a.onUpdate,getInstance=_a.getInstance;_this.setData((0,tslib_es6.C3)((0,tslib_es6.C3)({},_this.getData()),{transitions:!1})),runCallbacks([onTransitionsEnd,onUpdate],getInstance)},function(){return _this.getTransitions().duration}),this.applyPostProcess=function(action,state){var _a=_this.getProps(),settings=_a.settings,postProcess=_a.postProcess,name=action.name,_b=action.interaction,interaction=void 0!==_b&&_b,_c=action.transitions,transitions=void 0!==_c&&_c,_d=action.immediately,preparedAction={name:name,interaction:interaction,transitions:transitions,immediately:void 0!==_d&&_d};return(0,utils.c7)(postProcess)?postProcess.reduce(function(processedState,p){return p(processedState,settings,preparedAction)},state):(0,utils.mg)(postProcess)?postProcess(state,settings,preparedAction):state},this.updateState=function(modifier,options,callbacks){void 0===options&&(options={}),void 0===callbacks&&(callbacks=[]);var _a=options.transitions,transitions=void 0!==_a&&_a,_b=_this.getProps(),onTransitionsStart=_b.onTransitionsStart,getInstance=_b.getInstance,onChange=_b.onChange,onUpdate=_b.onUpdate,settings=_b.settings,previousData=_this.getData(),state=(0,utils.mg)(modifier)?modifier(previousData.state,settings):modifier,tolerance=state?.001*(0,helpers.S)(state):.001,somethingChanged=!(0,utils.IV)(previousData.state,state,tolerance),affectTransitionProperties=["coordinates","boundary","visibleArea","imageSize","transforms"].some(function(property){var _a;return!(0,utils.IV)(null===(_a=previousData.state)||void 0===_a?void 0:_a[property],null==state?void 0:state[property],tolerance)}),currentData=previousData;somethingChanged&&(transitions&&affectTransitionProperties&&_this.endTransitions(),currentData=(0,tslib_es6.C3)((0,tslib_es6.C3)({},currentData),{state:copyState(state),transitions:transitions&&affectTransitionProperties}),_this.setData(currentData),runCallback(onChange,getInstance)),currentData.transitions&&!previousData.transitions&&runCallback(onTransitionsStart,getInstance),runCallbacks((0,tslib_es6.sD)(callbacks,[onUpdate]),getInstance)},this.setInteractions=function(interactions){var _a=_this.getProps(),onInteractionStart=_a.onInteractionStart,onInteractionEnd=_a.onInteractionEnd,getInstance=_a.getInstance,previousInteractions=_this.getInteractions(),currentInteractions=(0,tslib_es6.C3)((0,tslib_es6.C3)({},previousInteractions),interactions);if((0,utils.IV)(previousInteractions,currentInteractions)||_this.setData((0,tslib_es6.C3)((0,tslib_es6.C3)({},_this.getData()),{interactions:currentInteractions})),hasInteractions(previousInteractions)!==hasInteractions(currentInteractions))if(hasInteractions(previousInteractions)){var state_1=_this.getData().state;_this.updateState(function(){return state_1&&_this.applyPostProcess({name:"interactionEnd",immediately:!0,transitions:!0},state_1)},{transitions:!0},[onInteractionEnd])}else runCallback(onInteractionStart,getInstance)},this.resetState=function(boundary,image){_this.updateState(_this.createDefaultState(boundary,image))},this.clear=function(){_this.updateState(null)},this.reconcileState=function(options){void 0===options&&(options={});var _a=_this.getProps(),reconcileStateAlgorithm=_a.reconcileStateAlgorithm,settings=_a.settings,state=_this.getData().state,_b=options.transitions,transitions=void 0!==_b&&_b;if(state&&!(0,helpers.a4)(state,settings)){var reconciledState=(reconcileStateAlgorithm||reconcileState)(state,settings);reconciledState=_this.applyPostProcess({name:"reconcileState",immediately:!0,transitions:transitions},reconciledState),_this.updateState(reconciledState,{transitions:transitions})}},this.transformImage=function(transform,options){void 0===options&&(options={});var _a=options.transitions,transitions=void 0===_a||_a,_b=options.interaction,interaction=void 0===_b||_b,_c=options.immediately,immediately=void 0!==_c&&_c,_d=options.normalize,normalize=void 0===_d||_d,_e=_this.getProps(),transformImageAlgorithm=_e.transformImageAlgorithm,onTransformImage=_e.onTransformImage,onTransformImageEnd=_e.onTransformImageEnd,settings=_e.settings,state=_this.getData().state,callbacks=[];if(state){normalize&&(transform=function normalizeImageTransform(state,transform){return transform.scale&&(transform.scale={factor:(0,utils.Ib)(transform.scale)?transform.scale:transform.scale.factor,center:!(0,utils.Ib)(transform.scale)&&transform.scale.center?normalizeCenter(state,transform.scale.center):void 0}),transform.rotate&&(transform.rotate={angle:(0,utils.Ib)(transform.rotate)?transform.rotate:transform.rotate.angle,center:!(0,utils.Ib)(transform.rotate)&&transform.rotate.center?normalizeCenter(state,transform.rotate.center):void 0}),transform.move&&(transform.move=normalizeMoveDirections(state,transform.move)),transform}(state,transform));var result=_this.applyPostProcess({name:"transformImage",transitions:transitions,immediately:immediately},(transformImageAlgorithm||transformImage)(state,settings,transform));callbacks.push(onTransformImage),interaction?_this.setInteractions({transformImage:{rotate:!(0,utils.Y3)(transform.rotate),flip:!(0,utils.Y3)(transform.flip),scale:!(0,utils.Y3)(transform.scale),move:!(0,utils.Y3)(transform.move)}}):(result=_this.applyPostProcess({name:"transformImageEnd",transitions:transitions,immediately:!0},result),callbacks.push(onTransformImageEnd)),_this.updateState(result,{transitions:immediately&&transitions},callbacks)}},this.transformImageEnd=function(options){void 0===options&&(options={});var _a=options.immediately,immediately=void 0===_a||_a,_b=options.transitions,transitions=void 0===_b||_b,state=_this.getData().state,onTransformImageEnd=_this.getProps().onTransformImageEnd;_this.updateState(function(){return state&&_this.applyPostProcess({name:"transformImageEnd",immediately:immediately,transitions:transitions},state)},{transitions:transitions},[onTransformImageEnd]),_this.setInteractions({transformImage:{rotate:!1,flip:!1,scale:!1,move:!1}})},this.zoomImage=function(scale,options){void 0===options&&(options={});var _a=options.interaction,interaction=void 0!==_a&&_a,_b=options.immediately,immediately=void 0===_b||_b,_c=options.transitions,transitions=void 0===_c||_c,_d=options.normalize,normalize=void 0!==_d&&_d;_this.transformImage({scale:scale},{interaction:interaction,immediately:immediately,transitions:transitions,normalize:normalize})},this.moveImage=function(left,top,options){void 0===options&&(options={});var _a=options.interaction,interaction=void 0!==_a&&_a,_b=options.immediately,immediately=void 0===_b||_b,_c=options.transitions,transitions=void 0===_c||_c,_d=options.normalize,normalize=void 0!==_d&&_d;_this.transformImage({move:{left:left,top:top}},{interaction:interaction,immediately:immediately,transitions:transitions,normalize:normalize})},this.flipImage=function(horizontal,vertical,options){void 0===options&&(options={});var _a=options.interaction,interaction=void 0!==_a&&_a,_b=options.immediately,immediately=void 0===_b||_b,_c=options.transitions,transitions=void 0===_c||_c,_d=options.normalize,normalize=void 0===_d||_d,state=_this.getState(),flip={horizontal:horizontal,vertical:vertical};_this.transformImage({flip:state&&normalize?normalizeFlip(state,flip):flip},{interaction:interaction,immediately:immediately,transitions:transitions})},this.rotateImage=function(rotate,options){void 0===options&&(options={});var _a=options.interaction,interaction=void 0!==_a&&_a,_b=options.immediately,immediately=void 0===_b||_b,_c=options.transitions,transitions=void 0===_c||_c,_d=options.normalize,normalize=void 0!==_d&&_d;_this.transformImage({rotate:rotate},{interaction:interaction,immediately:immediately,transitions:transitions,normalize:normalize})},this.reset=function(boundary,image){_this.resetState(boundary,image)},this.setState=function(modifier,options){void 0===options&&(options={});var settings=_this.getSettings(),state=_this.getData().state,_a=options.transitions,transitions=void 0===_a||_a,_b=options.immediately,immediately=void 0!==_b&&_b,_c=options.interaction,interaction=void 0!==_c&&_c,_d=options.postprocess,postprocess=void 0!==_d&&_d,newState=modifier&&((0,utils.mg)(modifier)?modifier(state,settings):(0,tslib_es6.C3)((0,tslib_es6.C3)({},state),modifier));_this.updateState(function(){return postprocess?newState&&_this.applyPostProcess({name:"setState",immediately:immediately,transitions:transitions,interaction:interaction},newState):newState},{transitions:transitions})},this.setCoordinates=function(transforms,options){void 0===options&&(options={});var state=_this.getData().state,_a=_this.getProps(),setCoordinatesAlgorithm=_a.setCoordinatesAlgorithm,settings=_a.settings,_b=options.transitions,transitions=void 0===_b||_b,_c=options.immediately,immediately=void 0===_c||_c;_this.updateState(function(){return state&&_this.applyPostProcess({name:"setCoordinates",immediately:immediately,transitions:transitions},(setCoordinatesAlgorithm||setCoordinates)(state,settings,transforms,SetCoordinatesMode.zoom))},{transitions:transitions})},this.setVisibleArea=function(visibleArea,options){void 0===options&&(options={});var _a=options.transitions,transitions=void 0===_a||_a,_b=options.immediately,immediately=void 0===_b||_b,state=_this.getData().state,_c=_this.getProps(),setVisibleAreaAlgorithm=_c.setVisibleAreaAlgorithm,settings=_c.settings;_this.updateState(function(){return state&&_this.applyPostProcess({name:"setVisibleArea",immediately:immediately,transitions:transitions},(setVisibleAreaAlgorithm||setVisibleArea)(state,settings,visibleArea))},{transitions:transitions})},this.setBoundary=function(boundary,options){void 0===options&&(options={});var state=_this.getData().state,_a=_this.getProps(),setBoundaryAlgorithm=_a.setBoundaryAlgorithm,settings=_a.settings,_b=options.transitions,transitions=void 0!==_b&&_b,_c=options.immediately,immediately=void 0===_c||_c;boundary?_this.updateState(function(){return state&&_this.applyPostProcess({name:"setBoundary",immediately:immediately,transitions:transitions},(setBoundaryAlgorithm||setBoundary)(state,settings,boundary))}):_this.updateState(null)},this.moveCoordinates=function(directions,options){void 0===options&&(options={});var data=_this.getData(),_a=_this.getProps(),moveCoordinatesAlgorithm=_a.moveCoordinatesAlgorithm,onMove=_a.onMove,onMoveEnd=_a.onMoveEnd,settings=_a.settings,_b=options.interaction,interaction=void 0===_b||_b,_c=options.transitions,transitions=void 0!==_c&&_c,_d=options.immediately,immediately=void 0!==_d&&_d,_e=options.normalize,normalize=void 0===_e||_e,callbacks=[];if(!data.transitions&&data.state){var normalizedDirections=normalize?normalizeMoveDirections(data.state,directions):function fillMoveDirections(directions){return{left:(0,utils.Ib)(directions.left)?directions.left:0,top:(0,utils.Ib)(directions.top)?directions.top:0}}(directions),result=_this.applyPostProcess({name:"moveCoordinates",interaction:interaction,immediately:immediately,transitions:transitions},(moveCoordinatesAlgorithm||moveCoordinates)(data.state,settings,normalizedDirections));callbacks.push(onMove),interaction?_this.setInteractions({moveCoordinates:!0}):(result=_this.applyPostProcess({name:"moveCoordinatesEnd",interaction:interaction,immediately:immediately,transitions:transitions},result),callbacks.push(onMoveEnd)),_this.updateState(result,{transitions:immediately&&transitions},callbacks)}},this.moveCoordinatesEnd=function(options){void 0===options&&(options={});var state=_this.getData().state,onMoveEnd=_this.getProps().onMoveEnd,_a=options.transitions,transitions=void 0===_a||_a,_b=options.immediately,immediately=void 0!==_b&&_b;_this.updateState(function(){return state&&_this.applyPostProcess({name:"moveCoordinatesEnd",transitions:transitions,immediately:immediately},state)},{transitions:transitions},[onMoveEnd]),_this.setInteractions({moveCoordinates:!1})},this.resizeCoordinates=function(anchor,directions,parameters,options){void 0===options&&(options={});var state=_this.getData().state,_a=_this.getProps(),resizeCoordinatesAlgorithm=_a.resizeCoordinatesAlgorithm,onResize=_a.onResize,onResizeEnd=_a.onResizeEnd,settings=_a.settings,_b=options.interaction,interaction=void 0===_b||_b,_c=options.transitions,transitions=void 0!==_c&&_c,_d=options.immediately,immediately=void 0!==_d&&_d,_e=options.normalize,normalize=void 0===_e||_e;if(!_this.getTransitions().active&&state){var callbacks=[],normalizedDirections=normalize?function normalizeResizeDirections(state,directions){var coefficient=(0,helpers.S)(state);return{left:(0,utils.Ib)(directions.left)?directions.left*coefficient:0,top:(0,utils.Ib)(directions.top)?directions.top*coefficient:0,right:(0,utils.Ib)(directions.right)?directions.right*coefficient:0,bottom:(0,utils.Ib)(directions.bottom)?directions.bottom*coefficient:0}}(state,directions):function fillResizeDirections(directions){return{left:(0,utils.Ib)(directions.left)?directions.left:0,top:(0,utils.Ib)(directions.top)?directions.top:0,right:(0,utils.Ib)(directions.right)?directions.right:0,bottom:(0,utils.Ib)(directions.bottom)?directions.bottom:0}}(directions),result=_this.applyPostProcess({name:"resizeCoordinates",interaction:interaction,immediately:immediately,transitions:transitions},(resizeCoordinatesAlgorithm||resizeCoordinates)(state,settings,anchor,normalizedDirections,(0,utils.Y9)(parameters)?parameters:{}));callbacks.push(onResize),interaction?_this.setInteractions({resizeCoordinates:!0}):(result=_this.applyPostProcess({name:"resizeCoordinatesEnd",interaction:interaction,immediately:immediately,transitions:transitions},result),callbacks.push(onResizeEnd)),_this.updateState(result,{transitions:immediately&&transitions},callbacks)}},this.resizeCoordinatesEnd=function(options){void 0===options&&(options={});var onResizeEnd=_this.getProps().onResizeEnd,state=_this.getData().state,_a=options.transitions,transitions=void 0===_a||_a,_b=options.immediately,immediately=void 0!==_b&&_b;_this.updateState(function(){return state&&_this.applyPostProcess({name:"resizeCoordinatesEnd",transitions:transitions,immediately:immediately},state)},{transitions:transitions},[onResizeEnd]),_this.setInteractions({resizeCoordinates:!1})},this.getStencilCoordinates=function(){var state=_this.getData().state;return(0,helpers.A7)(state)},this.getCoordinates=function(options){void 0===options&&(options={});var state=_this.getData().state,settings=_this.getProps().settings;if(state&&state.coordinates){var _a=options.round;return void 0===_a||_a?(0,helpers.Wu)(state,settings):(0,tslib_es6.C3)({},state.coordinates)}return null},this.getVisibleArea=function(){var state=_this.getData().state;return(null==state?void 0:state.visibleArea)?(0,tslib_es6.C3)({},state.visibleArea):null},this.getSettings=function(){var settings=_this.getProps().settings;return(0,tslib_es6.C3)({},settings)},this.getState=function(){return copyState(_this.getData().state)},this.getTransforms=function(){var state=_this.getData().state;return state?(0,utils.KS)(state.transforms):{rotate:0,flip:{horizontal:!1,vertical:!1}}},this.createDefaultState=function(boundary,image){var _a=_this.getProps(),createStateAlgorithm=_a.createStateAlgorithm,settings=_a.settings;return _this.applyPostProcess({name:"createState",immediately:!0,transitions:!1},(createStateAlgorithm||createState)({image:image,boundary:boundary},settings))},this.isConsistent=function(){var state=_this.getData().state,settings=_this.getProps().settings;return!state||(0,helpers.a4)(state,settings)}};function defaultSize(state,settings){var area,imageSize=state.imageSize,visibleArea=state.visibleArea,sizeRestrictions=(0,helpers.SU)(state,settings),aspectRatio=(0,helpers.u2)(state,settings);if(visibleArea)area=visibleArea;else{var sizeRestrictions_1=(0,service_utils.ai)((0,helpers.yY)(state,settings));area={width:Math.max(sizeRestrictions_1.minWidth,Math.min(sizeRestrictions_1.maxWidth,imageSize.width)),height:Math.max(sizeRestrictions_1.minHeight,Math.min(sizeRestrictions_1.maxHeight,imageSize.height))}}var optimalRatio=Math.min(aspectRatio.maximum||1/0,Math.max(aspectRatio.minimum||0,(0,service_utils.GI)(area))),size=area.width<area.height?{width:.8*area.width,height:.8*area.width/optimalRatio}:{height:.8*area.height,width:.8*area.height*optimalRatio};return approximateSize((0,tslib_es6.C3)((0,tslib_es6.C3)({},size),{aspectRatio:aspectRatio,sizeRestrictions:sizeRestrictions}))}function pixelsRestrictions(state,settings){return function retrieveSizeRestrictions(settings){return{minWidth:(0,utils.g5)(settings.minWidth)?(0,utils.Ii)(settings.minWidth):0,minHeight:(0,utils.g5)(settings.minHeight)?(0,utils.Ii)(settings.minHeight):0,maxWidth:(0,utils.g5)(settings.maxWidth)?(0,utils.Ii)(settings.maxWidth):1/0,maxHeight:(0,utils.g5)(settings.maxHeight)?(0,utils.Ii)(settings.maxHeight):1/0}}(settings)}function defaultPosition(state){var visibleArea=state.visibleArea,coordinates=state.coordinates,area=visibleArea||(0,helpers.MR)(state);return{left:(visibleArea?visibleArea.left:0)+area.width/2-(coordinates?coordinates.width/2:0),top:(visibleArea?visibleArea.top:0)+area.height/2-(coordinates?coordinates.height/2:0)}}function withDefaultSizeRestrictions(sizeRestrictions){return function(state,basicSettings){var value=(0,utils.mg)(sizeRestrictions)?sizeRestrictions(state,basicSettings):sizeRestrictions;return(0,service_sizeRestrictions.QT)(pixelsRestrictions(0,basicSettings),value)}}function createDefaultSettings(params){return(0,tslib_es6.C3)((0,tslib_es6.C3)({},params),{sizeRestrictions:function(state,basicSettings){return params.sizeRestrictions?(0,utils.mg)(params.sizeRestrictions)?params.sizeRestrictions(state,basicSettings):params.sizeRestrictions:pixelsRestrictions(0,basicSettings)},areaPositionRestrictions:function(state,basicSettings){return params.areaPositionRestrictions?(0,utils.mg)(params.areaPositionRestrictions)?params.areaPositionRestrictions(state,basicSettings):params.areaPositionRestrictions:function defaultAreaPositionRestrictions_defaultAreaPositionRestrictions(state,settings){var visibleArea=state.visibleArea,boundary=state.boundary,imageRestriction=settings.imageRestriction,imageSize=(0,helpers.MR)(state),restrictions={};return imageRestriction===types.o.fillArea?restrictions={left:0,top:0,right:imageSize.width,bottom:imageSize.height}:imageRestriction===types.o.fitArea&&((0,service_utils.GI)(boundary)>(0,service_utils.GI)(imageSize)?(restrictions={top:0,bottom:imageSize.height},visibleArea&&(visibleArea.width>imageSize.width?(restrictions.left=-(visibleArea.width-imageSize.width)/2,restrictions.right=imageSize.width-restrictions.left):(restrictions.left=0,restrictions.right=imageSize.width))):(restrictions={left:0,right:imageSize.width},visibleArea&&(visibleArea.height>imageSize.height?(restrictions.top=-(visibleArea.height-imageSize.height)/2,restrictions.bottom=imageSize.height-restrictions.top):(restrictions.top=0,restrictions.bottom=imageSize.height)))),restrictions}(state,basicSettings)},areaSizeRestrictions:function(state,basicSettings){return params.areaSizeRestrictions?(0,utils.mg)(params.areaSizeRestrictions)?params.areaSizeRestrictions(state,basicSettings):params.areaSizeRestrictions:function defaultAreaSizeRestrictions_defaultAreaSizeRestrictions(state,settings){var boundary=state.boundary,imageRestriction=settings.imageRestriction,imageSize=(0,helpers.MR)(state),restrictions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0};return imageRestriction===types.o.fillArea?(restrictions.maxWidth=imageSize.width,restrictions.maxHeight=imageSize.height):imageRestriction===types.o.fitArea&&((0,service_utils.GI)(boundary)>(0,service_utils.GI)(imageSize)?(restrictions.maxHeight=imageSize.height,restrictions.maxWidth=imageSize.height*(0,service_utils.GI)(boundary)):(restrictions.maxWidth=imageSize.width,restrictions.maxHeight=imageSize.width/(0,service_utils.GI)(boundary))),restrictions}(state,basicSettings)},positionRestrictions:function(state,basicSettings){return params.positionRestrictions?(0,utils.mg)(params.positionRestrictions)?params.positionRestrictions(state,basicSettings):params.positionRestrictions:function defaultPositionRestrictions_defaultPositionRestrictions(state,settings){var imageSize=(0,helpers.MR)(state),limits={};return settings.imageRestriction&&"none"!==settings.imageRestriction&&(limits={left:0,top:0,right:imageSize.width,bottom:imageSize.height}),limits}(state,basicSettings)},defaultCoordinates:function(state,basicSettings){if(params.defaultCoordinates)return(0,utils.mg)(params.defaultCoordinates)?params.defaultCoordinates(state,basicSettings):params.defaultCoordinates;var defaultSizeAlgorithm=params.defaultSize;defaultSizeAlgorithm||(defaultSizeAlgorithm=defaultSize);var size=(0,utils.mg)(defaultSizeAlgorithm)?defaultSizeAlgorithm(state,basicSettings):defaultSizeAlgorithm,defaultPositionAlgorithm_1=params.defaultPosition||defaultPosition;return[size,function(state){return(0,tslib_es6.C3)({},(0,utils.mg)(defaultPositionAlgorithm_1)?defaultPositionAlgorithm_1(state,basicSettings):defaultPositionAlgorithm_1)}]},defaultVisibleArea:function(state,basicSettings){return params.defaultVisibleArea?(0,utils.mg)(params.defaultVisibleArea)?params.defaultVisibleArea(state,basicSettings):params.defaultVisibleArea:function defaultVisibleArea(state,settings){var coordinates=state.coordinates,boundary=state.boundary,imageSize=(0,helpers.MR)(state),boundaryRatio=(0,service_utils.GI)(boundary);if(coordinates){var reference={height:Math.max(coordinates.height,imageSize.height),width:Math.max(coordinates.width,imageSize.width)},visibleArea={left:0,top:0,width:(0,service_utils.GI)(reference)>boundaryRatio?reference.width:reference.height*boundaryRatio,height:(0,service_utils.GI)(reference)>boundaryRatio?reference.width/boundaryRatio:reference.height};(visibleArea=(0,service_utils.Pd)(visibleArea,(0,helpers.Qj)(state,settings))).left=coordinates.left+coordinates.width/2-visibleArea.width/2,visibleArea.top=coordinates.top+coordinates.height/2-visibleArea.height/2;var coordinatesIntersection=(0,service_utils.Mv)(coordinates,(0,service_utils.Ar)((0,tslib_es6.C3)({left:0,top:0},imageSize))),restrictions={};return!coordinatesIntersection.left&&!coordinatesIntersection.right&&visibleArea.width<=imageSize.width&&(restrictions.left=0,restrictions.right=imageSize.width),!coordinatesIntersection.top&&!coordinatesIntersection.bottom&&visibleArea.height<=imageSize.height&&(restrictions.top=0,restrictions.bottom=imageSize.height),(0,service_utils.Ko)(visibleArea,restrictions)}var imageRatio=(0,service_utils.GI)(imageSize),areaProperties={height:imageRatio<boundaryRatio?imageSize.height:imageSize.width/boundaryRatio,width:imageRatio<boundaryRatio?imageSize.height*boundaryRatio:imageSize.width};return{left:imageSize.width/2-areaProperties.width/2,top:imageSize.height/2-areaProperties.height/2,width:areaProperties.width,height:areaProperties.height}}(state,basicSettings)},aspectRatio:function(state,basicSettings){return(0,service_utils.QX)((0,utils.mg)(params.aspectRatio)?params.aspectRatio(state,basicSettings):params.aspectRatio)}})}var advanced_cropper_image=__webpack_require__("../../../node_modules/.pnpm/advanced-cropper@0.17.1/node_modules/advanced-cropper/image/index.js");function stretchCropperBoundary(boundary,stretcher,size){stretcher.style.width="0px",stretcher.style.height="0px",stretcher.style.width=Math.max(boundary.clientWidth,size.width)+"px";var ratio=size.width/size.height;stretcher.style.height=Math.max(boundary.clientHeight,stretcher.clientWidth/ratio)+"px",stretcher.style.width=stretcher.clientHeight*ratio+"px"}function stretchPreviewBoundary(boundary,stretcher,size){stretcher.style.width="0px",stretcher.style.height="0px",stretcher.style.width=Math.max(boundary.getBoundingClientRect().width,size.width)+"px";var ratio=size.width/size.height;stretcher.style.height=Math.max(boundary.getBoundingClientRect().height,stretcher.getBoundingClientRect().width/ratio)+"px",stretcher.style.width=stretcher.getBoundingClientRect().height*ratio+"px",stretcher.clientWidth/stretcher.clientHeight>boundary.clientWidth/boundary.clientHeight?stretcher.clientWidth>boundary.clientWidth&&(stretcher.style.width=boundary.clientWidth+"px",stretcher.style.height=boundary.clientWidth/ratio+"px"):stretcher.clientHeight>boundary.clientHeight&&(stretcher.style.height=boundary.clientHeight+"px",stretcher.style.width=boundary.clientHeight*ratio+"px")}function fillBoundary(boundary){var _a=boundary.getBoundingClientRect();return{width:_a.width,height:_a.height}}function drawCroppedArea(state,image,resultCanvas,spareCanvas,options){if((0,helpers.w1)(state)){var transforms=state.transforms,coordinates=state.coordinates,source=0!==transforms.rotate||transforms.flip.horizontal||transforms.flip.vertical?function prepareSource(canvas,image,_a){var rotate=_a.rotate,flip=_a.flip,originalSize={width:"naturalWidth"in image?image.naturalWidth:image.width,height:"naturalHeight"in image?image.naturalHeight:image.height},transformedSize=(0,service_utils.Co)(originalSize,rotate),ctx=canvas.getContext("2d");if(canvas.height=transformedSize.height,canvas.width=transformedSize.width,ctx){ctx.save();var canvasCenter=(0,service_utils.GA)((0,service_utils.Ks)((0,tslib_es6.C3)({left:0,top:0},originalSize)),rotate);ctx.translate(-(canvasCenter.left-transformedSize.width/2),-(canvasCenter.top-transformedSize.height/2)),ctx.rotate(rotate*Math.PI/180),ctx.translate(flip.horizontal?originalSize.width:0,flip.vertical?originalSize.height:0),ctx.scale(flip.horizontal?-1:1,flip.vertical?-1:1),ctx.drawImage(image,0,0,originalSize.width,originalSize.height),ctx.restore()}return canvas}(spareCanvas,image,transforms):image,params=(0,tslib_es6.C3)({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:1/0,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},options),firstNumeric=function(array){return array.find(function(el){return(0,utils.g5)(el)})},size=approximateSize({sizeRestrictions:{minWidth:firstNumeric([params.width,params.minWidth])||0,minHeight:firstNumeric([params.height,params.minHeight])||0,maxWidth:firstNumeric([params.width,params.maxWidth])||1/0,maxHeight:firstNumeric([params.height,params.maxHeight])||1/0},width:coordinates.width,height:coordinates.height,aspectRatio:{minimum:coordinates.width/coordinates.height,maximum:coordinates.width/coordinates.height}});if(params.maxArea&&size.width*size.height>params.maxArea){var scale=Math.sqrt(params.maxArea/(size.width*size.height));size={width:Math.round(scale*size.width),height:Math.round(scale*size.height)}}return function updateCanvas(canvas,source,coordinates,resultSize,options){canvas.width=resultSize?resultSize.width:coordinates.width,canvas.height=resultSize?resultSize.height:coordinates.height;var ctx=canvas.getContext("2d");if(ctx){ctx.clearRect(0,0,canvas.width,canvas.height),options&&(options.imageSmoothingEnabled&&(ctx.imageSmoothingEnabled=options.imageSmoothingEnabled),options.imageSmoothingQuality&&(ctx.imageSmoothingQuality=options.imageSmoothingQuality),options.fillColor&&(ctx.fillStyle=options.fillColor,ctx.fillRect(0,0,canvas.width,canvas.height),ctx.save()));var offsetX=coordinates.left<0?-coordinates.left:0,offsetY=coordinates.top<0?-coordinates.top:0;ctx.drawImage(source,coordinates.left+offsetX,coordinates.top+offsetY,coordinates.width,coordinates.height,offsetX*(canvas.width/coordinates.width),offsetY*(canvas.height/coordinates.height),canvas.width,canvas.height)}return canvas}(resultCanvas,source,coordinates,size,params)}return null}var timingFunctions={linear:function(t){return t},"ease-in":function(t){return Math.pow(t,1.675)},"ease-out":function(t){return 1-Math.pow(1-t,1.675)},"ease-in-out":function(t){return.5*(Math.sin((t-.5)*Math.PI)+1)}},Animation=function(){function Animation(){this.active=!1}return Animation.prototype.start=function(animation){var _a;this.onStart=animation.onStart,this.onProgress=animation.onProgress,this.onStop=animation.onStop,this.active||null===(_a=this.onStart)||void 0===_a||_a.call(this),this.id&&window.cancelAnimationFrame(this.id),this.startTime=performance.now(),this.timingFunction=animation.timingFunction,this.endTime=this.startTime+animation.duration,this.active=!0,this.animate()},Animation.prototype.animate=function(){var _this=this;if(this.startTime&&this.endTime){var timingFunction=timingFunctions[this.timingFunction];timingFunction||(timingFunction=timingFunctions["ease-out"]);var percent=1-(this.endTime-performance.now())/(this.endTime-this.startTime),progress=Math.min(1,timingFunction(percent));this.onProgress&&this.onProgress(progress),percent<1?this.id=window.requestAnimationFrame(function(){return _this.animate()}):this.stop()}else this.stop()},Animation.prototype.stop=function(){this.active=!1,this.id&&window.cancelAnimationFrame(this.id),this.onStop&&this.onStop()},Animation}();function calculateGeometricProperties(touches,container){var _a=container.getBoundingClientRect(),left=_a.left,top=_a.top,centerMass={left:0,top:0},spread=0;return touches.forEach(function(touch){centerMass.left+=(touch.clientX-left)/touches.length,centerMass.top+=(touch.clientY-top)/touches.length}),touches.forEach(function(touch){spread+=(0,utils.qy)({left:centerMass.left,top:centerMass.top},{left:touch.clientX-left,top:touch.clientY-top})}),{centerMass:centerMass,spread:spread,count:touches.length}}function defaultStencilConstraints(rawSettings,stencilProps){return rawSettings.aspectRatio?{}:{aspectRatio:(0,service_utils.QX)((0,utils.mg)(stencilProps.aspectRatio)?stencilProps.aspectRatio():stencilProps.aspectRatio)}}var classnames=__webpack_require__("../../../node_modules/.pnpm/classnames@2.5.1/node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);function fixedStencilConstraints(rawSettings,stencilOptions){var defaultConstraints=defaultStencilConstraints({},stencilOptions);return{stencilSize:function(state,settings){var previousSize=(0,utils.mg)(rawSettings.stencilSize)?rawSettings.stencilSize(state,settings):rawSettings.stencilSize;return approximateSize((0,tslib_es6.C3)((0,tslib_es6.C3)({},previousSize),{aspectRatio:(0,service_utils.QU)(defaultConstraints.aspectRatio,(0,service_utils.QX)((0,service_utils.GI)(previousSize)))}))}}}function getStencilSize(state,settings){var boundary=state.boundary,size=(0,utils.mg)(settings.stencilSize)?settings.stencilSize(state,settings):settings.stencilSize;return(size.width>boundary.width||size.height>boundary.height)&&(size=approximateSize({sizeRestrictions:{maxWidth:boundary.width,maxHeight:boundary.height,minWidth:0,minHeight:0},width:size.width,height:size.height,aspectRatio:{minimum:(0,service_utils.GI)(size),maximum:(0,service_utils.GI)(size)}})),size}function sizeRestrictions(state,settings){var stencilSize=getStencilSize(state,(0,tslib_es6.C3)((0,tslib_es6.C3)({},settings),{stencilSize:settings.stencilSize})),areaRestrictions=(0,helpers.Qj)(state,settings);return{maxWidth:areaRestrictions.maxWidth*stencilSize.width/state.boundary.width,maxHeight:areaRestrictions.maxHeight*stencilSize.height/state.boundary.height,minWidth:0,minHeight:0}}function stencil_size_defaultSize(state,settings){var height,width,imageSize=state.imageSize,visibleArea=state.visibleArea,boundary=state.boundary,sizeRestrictions=(0,helpers.SU)(state,settings),aspectRatio=(0,helpers.u2)(state,settings),stencilSize=(0,utils.mg)(settings.stencilSize)?settings.stencilSize(state,settings):settings.stencilSize,area=visibleArea||imageSize;return(0,service_utils.GI)(area)>(0,service_utils.GI)(boundary)?width=(height=stencilSize.height*area.height/boundary.height)*(0,service_utils.GI)(stencilSize):height=(width=stencilSize.width*area.width/boundary.width)/(0,service_utils.GI)(stencilSize),approximateSize({width:width,height:height,aspectRatio:aspectRatio,sizeRestrictions:sizeRestrictions})}function aspectRatio(state,settings){var value=(0,service_utils.GI)(getStencilSize(state,settings));return{minimum:value,maximum:value}}function fixedStencil(state,settings,action){return action&&action.immediately?function fixedStencilAlgorithm(state,settings){if((0,helpers.w1)(state)){var result=copyState(state),stencil=getStencilSize(state,settings);result.visibleArea=(0,service_utils.Q5)(result.visibleArea,result.coordinates.width*result.boundary.width/(result.visibleArea.width*stencil.width));var scale=(0,service_utils.gL)(result.visibleArea,(0,helpers.Qj)(result,settings));return 1!==scale&&(result.visibleArea=(0,service_utils.Q5)(result.visibleArea,scale),result.coordinates=(0,service_utils.Q5)(result.coordinates,scale)),result.visibleArea=(0,service_utils.cp)(result.visibleArea,(0,service_utils.qq)((0,service_utils.Ks)(result.coordinates),(0,service_utils.Ks)(result.visibleArea))),result.visibleArea=(0,service_utils.Ko)(result.visibleArea,(0,helpers.WC)(result,settings)),result.coordinates=(0,service_utils.Ko)(result.coordinates,(0,service_utils.Wc)((0,service_utils.Ar)(result.visibleArea),(0,helpers.WC)(result,settings))),result}return state}(state,settings):state}function hybridStencilAutoZoom(state,settings,action){return action.immediately?function hybridStencilAutoZoomAlgorithm(state,settings){if((0,helpers.w1)(state)){var result=copyState(state),stencil={width:0,height:0};(0,service_utils.GI)(result.boundary)>(0,service_utils.GI)(result.coordinates)?(stencil.height=.8*result.boundary.height,stencil.width=stencil.height*(0,service_utils.GI)(result.coordinates)):(stencil.width=.8*result.boundary.width,stencil.height=stencil.width*(0,service_utils.GI)(result.coordinates)),result.visibleArea=(0,service_utils.Q5)(result.visibleArea,result.coordinates.width*result.boundary.width/(result.visibleArea.width*stencil.width));var scale=(0,service_utils.gL)(result.visibleArea,(0,helpers.Qj)(result,settings));return result.visibleArea=(0,service_utils.Q5)(result.visibleArea,scale),1!==scale&&(stencil.height/=scale,stencil.width/=scale),result.visibleArea=(0,service_utils.cp)(result.visibleArea,(0,service_utils.qq)((0,service_utils.Ks)(result.coordinates),(0,service_utils.Ks)(result.visibleArea))),result.visibleArea=(0,service_utils.Ko)(result.visibleArea,(0,helpers.WC)(result,settings)),result.coordinates=(0,service_utils.Ko)(result.coordinates,(0,service_utils.Wc)((0,service_utils.Ar)(result.visibleArea),(0,helpers.yY)(result,settings))),result}return state}(state,settings):state}function useDeprecationWarning(){var fired=(0,react.useRef)([]);return function(message){-1===fired.current.indexOf(message)&&fired.current.push(message)}}var useUpdateEffect=function(effect,deps){var isFirstMount=function useFirstMountState(){var isFirst=(0,react.useRef)(!0);return isFirst.current?(isFirst.current=!1,!0):isFirst.current}();(0,react.useEffect)(function(){if(!isFirstMount)return effect()},deps)};function useStateWithCallback(initialState){var _a=(0,tslib_es6.o5)((0,react.useState)(initialState),2),state=_a[0],setState=_a[1],_b=(0,tslib_es6.o5)((0,react.useState)(null),2),callback=_b[0],setCallback=_b[1],previousState=(0,react.useRef)(initialState);return useUpdateEffect(function(){callback&&callback(state,previousState.current)},[callback]),[state,function(value,callback){previousState.current=state,setState(value),setCallback(function(){return callback})}]}var CropperInstance=function(_super){function CropperInstance(props,onChange){var _this=_super.call(this)||this;return _this.props=props,_this.notify=onChange,_this.data={state:null,transitions:!1,interactions:{moveCoordinates:!1,resizeCoordinates:!1,transformImage:{rotate:!1,move:!1,scale:!1,flip:!1}}},_this}return(0,tslib_es6.ct)(CropperInstance,_super),CropperInstance.prototype.getProps=function(){return this.props()},CropperInstance.prototype.setData=function(data){this.data=data,this.notify()},CropperInstance.prototype.getData=function(){return this.data},CropperInstance}(AbstractCropperInstance);function useForceRerender(){var _a=(0,tslib_es6.o5)((0,react.useState)({}),2);_a[0];var setTick=_a[1];return function(){setTick({})}}function useCropperInstance(props){var rerender=useForceRerender(),getProps=function usePersistentFunction(props){var propsRef=(0,react.useRef)(props);return propsRef.current=props,function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return propsRef.current.apply(propsRef,(0,tslib_es6.Mt)([],(0,tslib_es6.o5)(args),!1))}}(function(){var _a=props(),settings=_a.settings,parameters=(0,tslib_es6.sX)(_a,["settings"]),extendedSettings=(0,tslib_es6.C3)({imageRestriction:types.o.fitArea,transformImage:{adjustStencil:!0}},settings),extendedParameters=(0,tslib_es6.C3)({transitions:!0},parameters);return(0,tslib_es6.C3)({settings:(0,tslib_es6.C3)((0,tslib_es6.C3)({},extendedSettings),createDefaultSettings(extendedSettings))},extendedParameters)});return(0,react.useRef)(new CropperInstance(getProps,rerender)).current}var useWindowResize=function(callback){var callbackRef=(0,react.useRef)(callback),internalCallback=function(){callbackRef.current&&callbackRef.current()};(0,react.useEffect)(function(){callbackRef.current=callback},[callback]),(0,react.useEffect)(function(){return window.addEventListener("resize",internalCallback),window.addEventListener("orientationchange",internalCallback),function(){window.removeEventListener("resize",internalCallback),window.removeEventListener("orientationchange",internalCallback)}},[])};function useAbstractCropper(props){var _this=this,_a=props(),src=_a.src,onReady=_a.onReady,onError=_a.onError,onUpdate=_a.onUpdate,_b=_a.canvas,canvas=void 0===_b||_b,_c=_a.unloadTime,unloadTime=void 0===_c?500:_c,_d=_a.crossOrigin,crossOrigin=void 0===_d||_d,_e=_a.checkOrientation,checkOrientation=void 0===_e||_e,_f=_a.autoReconcileState,autoReconcileState=void 0===_f||_f,imageRef=(0,react.useRef)(null),boundaryRef=(0,react.useRef)(null),canvasRef=(0,react.useRef)(null),cropperRef=(0,react.useRef)(null),_g=(0,tslib_es6.o5)(useStateWithCallback(null),2),currentImage=_g[0],setCurrentImage=_g[1],cropper=useCropperInstance(function(){return(0,tslib_es6.C3)((0,tslib_es6.C3)({},props()),{getInstance:function(){return cropperRef.current}})}),cropperImage=function useCropperImage(options){var src=options.src,onLoadingStart=options.onLoadingStart,onLoadingEnd=options.onLoadingEnd,onError=options.onError,onLoad=options.onLoad,crossOrigin=options.crossOrigin,checkOrientation=options.checkOrientation,canvas=options.canvas,unloadTime=options.unloadTime,_a=(0,tslib_es6.o5)((0,react.useState)(null),2),image=_a[0],setImage=_a[1],_b=(0,tslib_es6.o5)((0,react.useState)(!1),2),loading=_b[0],setLoading=_b[1],_c=(0,tslib_es6.o5)(useStateWithCallback(!1),2),loaded=_c[0],setLoaded=_c[1],currentSrc=(0,react.useRef)(null);return(0,react.useEffect)(function(){if(currentSrc.current!==src)if(currentSrc.current=src||null,setLoaded(!1),src){setLoading(!0),null==onLoadingStart||onLoadingStart();var promises=[(0,advanced_cropper_image.Go)(src,{crossOrigin:(0,utils.Y3)(crossOrigin)?canvas:crossOrigin,checkOrientation:checkOrientation})];loaded&&unloadTime&&promises.push((0,utils.SE)(unloadTime)),Promise.all(promises).then(function(responses){var image=(0,tslib_es6.o5)(responses,1)[0];currentSrc.current===src&&setImage(image)}).catch(function(){currentSrc.current===src&&(null==onError||onError())}).finally(function(){currentSrc.current===src&&(null==onLoadingEnd||onLoadingEnd(),setLoading(!1))})}else unloadTime?(0,utils.SE)(unloadTime).then(function(){currentSrc.current===src&&setImage(null)}):setImage(null)},[src,image]),(0,react.useEffect)(function(){image&&setLoaded(!0,function(){null==onLoad||onLoad(image)})},[image]),{isLoading:function(){return loading},isLoaded:function(){return loaded},getImage:function(){return image},setImage:setImage}}({src:src,crossOrigin:crossOrigin,checkOrientation:checkOrientation,unloadTime:unloadTime,canvas:canvas,onError:function(){cropperRef.current&&(null==onError||onError(cropperRef.current))}}),autoReconcile=function useCropperAutoReconcile(cropper,enabled){void 0===enabled&&(enabled=!0);var _a=(0,tslib_es6.o5)((0,react.useState)(enabled),2),active=_a[0],setActive=_a[1];return(0,react.useLayoutEffect)(function(){active&&!cropper.hasInteractions()&&cropper.reconcileState()}),{pause:function(){setActive(!1)},resume:function(){setActive(!0)}}}(cropper,autoReconcileState),resetCropper=function(){return(0,tslib_es6.kH)(_this,void 0,void 0,function(){var image_1,boundary_1,_a;return(0,tslib_es6.KE)(this,function(_b){switch(_b.label){case 0:return boundaryRef.current?(autoReconcile.pause(),image_1=cropperImage.getImage(),[4,null===(_a=boundaryRef.current)||void 0===_a?void 0:_a.stretchTo(image_1)]):[3,2];case 1:boundary_1=_b.sent(),setCurrentImage(image_1,function(){boundary_1&&image_1?cropper.reset(boundary_1,image_1):cropper.clear()}),autoReconcile.resume(),_b.label=2;case 2:return[2]}})})},refreshCropper=function(){return(0,tslib_es6.kH)(_this,void 0,void 0,function(){var image,boundary,state,_a;return(0,tslib_es6.KE)(this,function(_b){switch(_b.label){case 0:return boundaryRef.current?(autoReconcile.pause(),image=cropperImage.getImage(),[4,null===(_a=boundaryRef.current)||void 0===_a?void 0:_a.stretchTo(image)]):[3,2];case 1:(boundary=_b.sent())&&image?(state=cropper.getState())?boundary.width===state.boundary.width&&boundary.height===state.boundary.height||(cropper.setBoundary(boundary),cropper.reconcileState()):cropper.reset(boundary,image):cropper.clear(),autoReconcile.resume(),_b.label=2;case 2:return[2]}})})},cropperInterface={reset:function(){return resetCropper()},refresh:function(){return refreshCropper()},setImage:function(image){return setCurrentImage(image)},reconcileState:cropper.reconcileState,moveCoordinates:cropper.moveCoordinates,moveCoordinatesEnd:cropper.moveCoordinatesEnd,resizeCoordinates:cropper.resizeCoordinates,clear:cropper.clear,resizeCoordinatesEnd:cropper.resizeCoordinatesEnd,moveImage:cropper.moveImage,flipImage:cropper.flipImage,zoomImage:cropper.zoomImage,rotateImage:cropper.rotateImage,transformImage:cropper.transformImage,transformImageEnd:cropper.transformImageEnd,setCoordinates:cropper.setCoordinates,setVisibleArea:cropper.setVisibleArea,startTransitions:cropper.startTransitions,setState:cropper.setState,hasInteractions:cropper.hasInteractions,getStencilCoordinates:cropper.getStencilCoordinates,getCoordinates:cropper.getCoordinates,getVisibleArea:cropper.getVisibleArea,getTransforms:cropper.getTransforms,getTransitions:cropper.getTransitions,getInteractions:cropper.getInteractions,getSettings:cropper.getSettings,getState:cropper.getState,getDefaultState:function(){var state=cropper.getState(),image=cropperImage.getImage();return state&&image?cropper.createDefaultState(state.boundary,image):null},getCanvas:function(options){var state=cropper.getState();return imageRef.current&&canvasRef.current&&state?canvasRef.current.draw(state,imageRef.current,options):null},getImage:function(){return currentImage?(0,tslib_es6.C3)({},currentImage):null},isLoading:cropperImage.isLoading,isLoaded:cropperImage.isLoaded};return useWindowResize(function(){refreshCropper()}),useUpdateEffect(function(){resetCropper()},[cropperImage.getImage()]),useUpdateEffect(function(){cropperRef.current&&currentImage&&(null==onReady||onReady(cropperRef.current))},[currentImage]),useUpdateEffect(function(){cropperRef.current&&(null==onUpdate||onUpdate(cropperRef.current))},[cropperImage.isLoaded(),cropperImage.isLoading()]),(0,react.useImperativeHandle)(cropperRef,function(){return cropperInterface}),{cropper:cropperInterface,refs:{image:imageRef,boundary:boundaryRef,canvas:canvasRef},image:currentImage}}var StretchableBoundary=(0,react.forwardRef)(function(_a,ref){var className=_a.className,style=_a.style,stretcherClassName=_a.stretcherClassName,contentClassName=_a.contentClassName,_b=_a.stretchAlgorithm,stretchAlgorithm=void 0===_b?stretchCropperBoundary:_b,_c=_a.sizeAlgorithm,sizeAlgorithm=void 0===_c?fillBoundary:_c,children=_a.children,stretcherRef=(0,react.useRef)(null),boundaryRef=(0,react.useRef)(null);return(0,react.useImperativeHandle)(ref,function(){return{reset:function(){var stretcher=stretcherRef.current;stretcher&&(stretcher.style.height="",stretcher.style.width="")},stretchTo:function(size){var stretcher=stretcherRef.current,boundary=boundaryRef.current;if((null==size?void 0:size.width)&&(null==size?void 0:size.height)&&stretcher&&boundary){stretchAlgorithm(boundary,stretcher,size);var result=sizeAlgorithm(boundary,size);return Promise.resolve(result.width&&result.height?result:null)}return stretcher&&(stretcher.style.height="",stretcher.style.width=""),Promise.resolve(null)}}}),react.createElement("div",{ref:boundaryRef,style:style,className:classnames_default()("advanced-cropper-boundary",className)},react.createElement("div",{ref:stretcherRef,className:classnames_default()(["advanced-cropper-boundary__stretcher",stretcherClassName])}),react.createElement("div",{className:classnames_default()(["advanced-cropper-boundary__content",contentClassName])},children))});StretchableBoundary.displayName="StretchableBoundary";var CropperFade=function(_a){var visible=_a.visible,className=_a.className,style=_a.style,children=_a.children;return react.createElement("div",{style:style,className:classnames_default()(className,"advanced-cropper-fade",Boolean(visible)&&"advanced-cropper-fade--visible")},children)},CropperWrapper=function(_a){var cropper=_a.cropper,children=_a.children,className=_a.className,style=_a.style,state=cropper?cropper.getState():null,loaded=!!cropper&&cropper.isLoaded();return react.createElement("div",{className:classnames_default()(className,"advanced-cropper-wrapper"),style:style},react.createElement(CropperFade,{visible:state&&loaded,className:"advanced-cropper-wrapper__fade"},children))};function preventDefault(e){e.preventDefault()}var CropperBackgroundImage=(0,react.forwardRef)(function(_a,ref){var className=_a.className,style=_a.style,cropper=_a.cropper,_b=_a.crossOrigin,crossOrigin=void 0===_b||_b,state=cropper.getState(),transitions=cropper.getTransitions(),image=cropper.getImage(),transformStyles=image&&state?(0,advanced_cropper_image.uC)(image,state,transitions):{},src=image?image.src:void 0;return src?react.createElement("img",{key:src,ref:ref,className:classnames_default()("advanced-cropper-background-image",className),src:src,crossOrigin:!0===crossOrigin?"anonymous":crossOrigin||void 0,style:(0,tslib_es6.C3)((0,tslib_es6.C3)({},transformStyles),style),onMouseDown:preventDefault}):null});CropperBackgroundImage.displayName="CropperBackgroundImage";var CropperCanvas=(0,react.forwardRef)(function(_,ref){var canvasRef=(0,react.useRef)(null),spareCanvasRef=(0,react.useRef)(null);return(0,react.useImperativeHandle)(ref,function(){return{draw:function(state,image,options){return void 0===options&&(options={}),image&&canvasRef.current&&spareCanvasRef.current?drawCroppedArea(state,image,canvasRef.current,spareCanvasRef.current,options):null}}}),react.createElement(react.Fragment,null,react.createElement("canvas",{className:"advanced-cropper-canvas",ref:canvasRef}),react.createElement("canvas",{className:"advanced-cropper-canvas",ref:spareCanvasRef}))});CropperCanvas.displayName="CropperCanvas";var DraggableElement=function(_super){function DraggableElement(props){var _this=_super.call(this,props)||this;return _this.processMove=function(e,newTouches){var _a,container=_this.container.current;if(container&&_this.touches.length){var _b=container.getBoundingClientRect(),left=_b.left,top_1=_b.top;if(1===_this.touches.length&&1===newTouches.length&&_this.props.onMove){var movingToAnchor={left:Math.abs(newTouches[0].clientX-_this.anchor.left-left)<Math.abs(_this.touches[0].clientX-_this.anchor.left-left),top:Math.abs(newTouches[0].clientY-_this.anchor.top-top_1)<Math.abs(_this.touches[0].clientY-_this.anchor.top-top_1)},direction={left:0,top:0};_this.props.useAnchor&&movingToAnchor.left||(direction.left=newTouches[0].clientX-_this.touches[0].clientX),_this.props.useAnchor&&movingToAnchor.top||(direction.top=newTouches[0].clientY-_this.touches[0].clientY),null===(_a=_this.props)||void 0===_a||_a.onMove(direction,e),_this.touches=(0,tslib_es6.Mt)([],(0,tslib_es6.o5)(newTouches),!1)}}},_this.processEnd=function(){var _a=_this.props,onMoveEnd=_a.onMoveEnd,onLeave=_a.onLeave;!_this.props.disabled&&_this.touches.length&&(null==onMoveEnd||onMoveEnd()),_this.hovered&&(null==onLeave||onLeave(),_this.hovered=!1),_this.touches=[]},_this.initAnchor=function(touch){var container=_this.container.current;if(container){var _a=container.getBoundingClientRect(),left=_a.left,top_2=_a.top;_this.anchor={left:touch.clientX-left,top:touch.clientY-top_2}}},_this.onMouseOver=function(){var _a=_this.props,onEnter=_a.onEnter,disabled=_a.disabled;_this.hovered||disabled||(_this.hovered=!0,null==onEnter||onEnter())},_this.onMouseLeave=function(){var onLeave=_this.props.onLeave;_this.hovered&&!_this.touches.length&&(_this.hovered=!1,null==onLeave||onLeave())},_this.onTouchStart=function(e){var _a=_this.props,onEnter=_a.onEnter,onMoveStart=_a.onMoveStart,disabled=_a.disabled;if(e.cancelable){_this.touches=Array.from(e.touches);var shouldStartMove=!disabled&&1===e.touches.length;shouldStartMove&&(_this.touches=Array.from(e.touches),null==onMoveStart||onMoveStart()),_this.hovered||disabled||(_this.hovered=!0,null==onEnter||onEnter()),(_this.started||shouldStartMove)&&(e.preventDefault(),e.stopPropagation())}},_this.onTouchEnd=function(){_this.started=!1,_this.processEnd()},_this.onTouchMove=function(e){_this.touches.length>=1&&(_this.started?(_this.processMove(e,Array.from(e.touches)),e.preventDefault(),e.stopPropagation()):(0,utils.qy)({left:_this.touches[0].clientX,top:_this.touches[0].clientY},{left:e.touches[0].clientX,top:e.touches[0].clientY})>(_this.props.activationDistance||0)&&(_this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),_this.started=!0))},_this.onMouseDown=function(e){var _a=_this.props,onMoveStart=_a.onMoveStart;if(!_a.disabled&&0===e.button){var touch={clientX:e.clientX,clientY:e.clientY};_this.touches=[touch],_this.initAnchor(touch),e.stopPropagation(),null==onMoveStart||onMoveStart()}},_this.onMouseMove=function(e){!_this.props.disabled&&_this.touches.length&&(_this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},_this.onMouseUp=function(){_this.processEnd()},_this.touches=[],_this.hovered=!1,_this.started=!1,_this.anchor={left:0,top:0},_this.container=(0,react.createRef)(),_this}return(0,tslib_es6.ct)(DraggableElement,_super),DraggableElement.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var container=this.container.current;container&&(container.removeEventListener("touchstart",this.onTouchStart),container.removeEventListener("mousedown",this.onMouseDown))},DraggableElement.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var container=this.container.current;container&&(container.addEventListener("touchstart",this.onTouchStart,{passive:!1}),container.addEventListener("mousedown",this.onMouseDown,{passive:!1}))},DraggableElement.prototype.componentDidUpdate=function(prevProps){this.props.disabled&&!prevProps.disabled&&(this.touches=[])},DraggableElement.prototype.render=function(){var _a=this.props,children=_a.children,className=_a.className;return react.createElement("div",{className:classnames_default()("advanced-cropper-draggable-element",className),ref:this.container,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave},children)},DraggableElement.defaultProps={disabled:!1,activationDistance:30,useAnchor:!0,rerender:!0},DraggableElement}(react.Component),LineWrapper=function(_a){var position=_a.position,className=_a.className,disabled=_a.disabled,onDrag=_a.onDrag,onDragEnd=_a.onDragEnd,onLeave=_a.onLeave,onEnter=_a.onEnter,children=_a.children;return react.createElement(DraggableElement,{className:classnames_default()(["advanced-cropper-line-wrapper",position&&"advanced-cropper-line-wrapper--".concat(position),disabled&&"advanced-cropper-line-wrapper--disabled",className]),disabled:disabled,onMove:onDrag,onMoveEnd:onDragEnd,onLeave:onLeave,onEnter:onEnter,activationDistance:0},react.createElement("div",{className:classnames_default()(["advanced-cropper-line-wrapper__content",position&&"advanced-cropper-line-wrapper__content--".concat(position)])},children))},SimpleLine=function(_a){var _b,_c,position=_a.position,hoverClassName=_a.hoverClassName,wrapperClassName=_a.wrapperClassName,defaultClassName=_a.defaultClassName,disabled=_a.disabled,onMove=_a.onMove,onMoveEnd=_a.onMoveEnd,_d=(0,tslib_es6.o5)((0,react.useState)(!1),2),hover=_d[0],setHover=_d[1];return react.createElement(LineWrapper,{className:classnames_default()("advanced-cropper-simple-line-wrapper",wrapperClassName,(_b={},_b["advanced-cropper-simple-line-wrapper--".concat(position)]=!!position,_b)),position:position,disabled:disabled,onDrag:onMove,onDragEnd:onMoveEnd,onLeave:function(){setHover(!1)},onEnter:function(){setHover(!0)}},react.createElement("div",{className:classnames_default()("advanced-cropper-simple-line",hover&&"advanced-cropper-simple-line--hover",defaultClassName,hover&&hoverClassName,(_c={},_c["advanced-cropper-simple-line--".concat(position)]=!!position,_c))}))},HandlerWrapper=function(_a){var horizontalPosition=_a.horizontalPosition,verticalPosition=_a.verticalPosition,className=_a.className,disabled=_a.disabled,onDrag=_a.onDrag,onDragEnd=_a.onDragEnd,onLeave=_a.onLeave,onEnter=_a.onEnter,children=_a.children,style=_a.style,position=horizontalPosition||verticalPosition?(0,utils.G)(horizontalPosition,verticalPosition).snakeCase:null;return react.createElement("div",{style:style,className:classnames_default()(className,"advanced-cropper-handler-wrapper",position&&"advanced-cropper-handler-wrapper--".concat(position),disabled&&"advanced-cropper-handler-wrapper--disabled")},react.createElement(DraggableElement,{className:"advanced-cropper-handler-wrapper__draggable",disabled:disabled,onMove:onDrag,onMoveEnd:onDragEnd,onLeave:onLeave,onEnter:onEnter,activationDistance:0},children))},SimpleHandler=function(_a){var _b,verticalPosition=_a.verticalPosition,horizontalPosition=_a.horizontalPosition,hoverClassName=_a.hoverClassName,wrapperClassName=_a.wrapperClassName,defaultClassName=_a.defaultClassName,wrapperStyle=_a.wrapperStyle,disabled=_a.disabled,onMove=_a.onMove,onMoveEnd=_a.onMoveEnd,_c=(0,tslib_es6.o5)((0,react.useState)(!1),2),hover=_c[0],setHover=_c[1];return react.createElement(HandlerWrapper,{style:wrapperStyle,className:classnames_default()("advanced-cropper-simple-handler-wrapper",wrapperClassName,verticalPosition&&"advanced-cropper-simple-handler-wrapper--".concat(verticalPosition),horizontalPosition&&"advanced-cropper-simple-handler-wrapper--".concat(horizontalPosition),horizontalPosition&&verticalPosition&&"advanced-cropper-simple-handler-wrapper--".concat(horizontalPosition,"-").concat(verticalPosition),hover&&"advanced-cropper-simple-handler-wrapper--hover"),verticalPosition:verticalPosition,horizontalPosition:horizontalPosition,disabled:disabled,onDrag:onMove,onDragEnd:onMoveEnd,onLeave:function(){setHover(!1)},onEnter:function(){setHover(!0)}},react.createElement("div",{className:classnames_default()("advanced-cropper-simple-handler",hover&&"advanced-cropper-simple-handler--hover",defaultClassName,hover&&hoverClassName,(_b={},_b["advanced-cropper-simple-handler--".concat(verticalPosition)]=!!verticalPosition,_b["advanced-cropper-simple-handler--".concat(horizontalPosition)]=!!horizontalPosition,_b["advanced-cropper-simple-handler--".concat(horizontalPosition,"-").concat(verticalPosition)]=horizontalPosition&&verticalPosition,_b))}))},HORIZONTAL_DIRECTIONS=["east","west",null],VERTICAL_DIRECTIONS=["south","north",null],BoundingBox=function(_a){var style=_a.style,className=_a.className,children=_a.children,onResize=_a.onResize,onResizeEnd=_a.onResizeEnd,_b=_a.handlerComponent,handlerComponent=void 0===_b?SimpleHandler:_b,_c=_a.handlers,handlers=void 0===_c?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:_c,_d=_a.handlerClassNames,handlerClassNames=void 0===_d?{}:_d,_e=_a.handlerWrapperClassNames,handlerWrapperClassNames=void 0===_e?{}:_e,_f=_a.lines,lines=void 0===_f?{west:!0,north:!0,east:!0,south:!0}:_f,_g=_a.lineComponent,lineComponent=void 0===_g?SimpleLine:_g,_h=_a.lineClassNames,lineClassNames=void 0===_h?{}:_h,_j=_a.lineWrapperClassNames,lineWrapperClassNames=void 0===_j?{}:_j,_k=_a.disabled,disabled=void 0!==_k&&_k,_l=_a.reference,reference=void 0===_l?null:_l,_m=(0,tslib_es6.o5)((0,react.useState)(null),2),lastReference=_m[0],setLastReference=_m[1],points=(0,react.useMemo)(function(){var result=[];return HORIZONTAL_DIRECTIONS.forEach(function(hDirection){VERTICAL_DIRECTIONS.forEach(function(vDirection){if(hDirection!==vDirection){var _a=(0,utils.G)(hDirection,vDirection),snakeCase=_a.snakeCase,camelCase=_a.camelCase;snakeCase&&camelCase&&result.push({name:camelCase,className:snakeCase,verticalPosition:vDirection,horizontalPosition:hDirection})}})}),result},[]),lineNodes=(0,react.useMemo)(function(){var result=[];return points.forEach(function(point){(0,utils.gV)(point.name)&&((0,utils.Y9)(lines)?lines[point.name]:lines)&&result.push({name:point.name,component:lineComponent,className:classnames_default()(lineClassNames.default,lineClassNames[point.name],disabled&&lineClassNames.disabled),wrapperClassName:classnames_default()("advanced-cropper-bounding-box__line","advanced-cropper-bounding-box__line--".concat(point.name),lineWrapperClassNames.default,lineWrapperClassNames[point.name],disabled&&lineWrapperClassNames.disabled),hoverClassName:lineClassNames.hover,verticalPosition:point.verticalPosition,horizontalPosition:point.horizontalPosition,disabled:disabled})}),result},[points,lines,lineComponent,lineClassNames,lineWrapperClassNames,disabled]),handlerNodes=(0,react.useMemo)(function(){var result=[];return points.forEach(function(point){((0,utils.Y9)(handlers)?handlers[point.name]:handlers)&&result.push({name:point.name,component:handlerComponent,className:classnames_default()(handlerClassNames.default,handlerClassNames[point.name]),containerClassName:classnames_default()("advanced-cropper-bounding-box__handler-wrapper","advanced-cropper-bounding-box__handler-wrapper--".concat(point.className)),wrapperClassName:classnames_default()("advanced-cropper-bounding-box__handler","advanced-cropper-bounding-box__handler--".concat(point.className),handlerWrapperClassNames.default,handlerWrapperClassNames[point.name]),hoverClassName:handlerClassNames.hover,verticalPosition:point.verticalPosition,horizontalPosition:point.horizontalPosition,disabled:disabled})}),result},[points,handlers,handlerComponent,handlerClassNames,handlerWrapperClassNames,disabled]),onHandlerMove=function(horizontalPosition,verticalPosition){return function(_a,nativeEvent){var respectDirection,directions={left:_a.left,top:_a.top};if(!verticalPosition&&horizontalPosition?respectDirection="width":verticalPosition&&!horizontalPosition&&(respectDirection="height"),!disabled){if(onResize){var anchor=(0,utils.G)(horizontalPosition,verticalPosition).camelCase;anchor&&onResize(anchor,directions,{reference:lastReference||reference,preserveAspectRatio:nativeEvent&&nativeEvent.shiftKey,respectDirection:respectDirection,compensate:!0})}lastReference||setLastReference(reference)}}},onHandlerMoveEnd=function(){null==onResizeEnd||onResizeEnd(),setLastReference(null)};return react.createElement("div",{className:classnames_default()("advanced-cropper-bounding-box",className),style:style},children,react.createElement("div",null,lineNodes.map(function(line){return react.createElement(line.component,{key:line.name,defaultClassName:line.className,hoverClassName:line.hoverClassName,wrapperClassName:line.wrapperClassName,position:line.name,disabled:line.disabled,onMove:onHandlerMove(line.horizontalPosition,line.verticalPosition),onMoveEnd:onHandlerMoveEnd})})),react.createElement("div",null,handlerNodes.map(function(handler){var handlerElement=react.createElement(handler.component,{defaultClassName:handler.className,hoverClassName:handler.hoverClassName,wrapperClassName:handler.wrapperClassName,horizontalPosition:handler.horizontalPosition,verticalPosition:handler.verticalPosition,disabled:handler.disabled,onMove:onHandlerMove(handler.horizontalPosition,handler.verticalPosition),onMoveEnd:onHandlerMoveEnd});return react.createElement("div",{key:handler.name,className:handler.containerClassName},handlerElement)})))},StencilOverlay=function(_a){var className=_a.className,children=_a.children;return react.createElement("div",{className:classnames_default()("advanced-cropper-stencil-overlay",className)},children)};var ArtificialTransition=function(_a){var className=_a.className,transitions=_a.transitions,children=_a.children,values=(0,tslib_es6.sX)(_a,["className","transitions","children"]),root=(0,react.useRef)(null),transitionValues=(0,react.useRef)(values),_b=(0,tslib_es6.o5)((0,react.useState)(values),2),rememberedValues=_b[0],setRememberedValues=_b[1],_c=(0,tslib_es6.o5)(function useTransition(transitions){void 0===transitions&&(transitions=null);var animation=(0,react.useRef)(new Animation),_a=(0,tslib_es6.o5)((0,react.useState)(!1),2),active=_a[0],setActive=_a[1];return[function(callback){transitions&&transitions.active?animation.current.start((0,tslib_es6.C3)((0,tslib_es6.C3)({},transitions),{onStart:function(){setActive(!0)},onProgress:function(progress){callback(progress)},onStop:function(){setActive(!1)}})):animation.current.active||callback(1)},active]}(transitions),2),runTransitions=_c[0],transitionsActive=_c[1];(0,react.useLayoutEffect)(function(){if(!(0,utils.IV)(rememberedValues,values)){setRememberedValues(values);var startValues_1=transitionsActive?(0,tslib_es6.C3)({},transitionValues.current):rememberedValues;runTransitions(function(progress){["left","top","height","width"].forEach(function(property){var desiredValue=values[property],startValue=startValues_1[property];transitionValues.current[property]=(0,utils.Ib)(startValue)&&(0,utils.Ib)(desiredValue)?startValue+(desiredValue-startValue)*progress:desiredValue}),root.current&&(root.current.style.width="".concat(transitionValues.current.width,"px"),root.current.style.height="".concat(transitionValues.current.height,"px"),root.current.style.transform="translate3d(".concat(transitionValues.current.left,"px, ").concat(transitionValues.current.top,"px, 0px)"))})}},[rememberedValues,transitionsActive,values.width,values.height,values.top,values.left]);var currentValues=transitionsActive?transitionValues.current:values,rootStyle={left:0,top:0,width:"".concat(currentValues.width,"px"),height:"".concat(currentValues.height,"px"),transform:"translate3d(".concat(currentValues.left,"px, ").concat(currentValues.top,"px, 0px)")};return react.createElement("div",{ref:root,className:classnames_default()("advanced-cropper-artificial-transition",className),style:rootStyle},children)},StencilWrapper=function(_a){var className=_a.className,transitions=_a.transitions,width=_a.width,height=_a.height,left=_a.left,top=_a.top,children=_a.children;return react.createElement(ArtificialTransition,{className:classnames_default()("advanced-cropper-stencil-wrapper",className),transitions:transitions,width:width,height:height,top:top,left:left},children)},StencilGrid=function(_a){var _b=_a.columns,columns=void 0===_b?3:_b,_c=_a.rows,rows=void 0===_c?3:_c,_d=_a.visible,visible=void 0!==_d&&_d,className=_a.className,nodes=[],_e=(0,tslib_es6.o5)((0,react.useState)(columns),2),currentColumns=_e[0],setCurrentColumns=_e[1],_f=(0,tslib_es6.o5)((0,react.useState)(rows),2),currentRows=_f[0],setCurrentRows=_f[1];useUpdateEffect(function(){visible&&(setCurrentRows(rows),setCurrentColumns(columns))},[visible,columns,rows]);for(var i=0;i<currentRows;i++){for(var cells=[],j=0;j<currentColumns;j++)cells.push(react.createElement("div",{key:j,className:classnames_default()("advanced-cropper-stencil-grid__cell",0===i&&"advanced-cropper-stencil-grid__cell--top",i===currentRows-1&&"advanced-cropper-stencil-grid__cell--bottom",0===j&&"advanced-cropper-stencil-grid__cell--left",j===currentColumns-1&&"advanced-cropper-stencil-grid__cell--right")}));nodes.push(react.createElement("div",{key:i,className:"advanced-cropper-stencil-grid__row"},cells))}return react.createElement("div",{className:classnames_default()("advanced-cropper-stencil-grid",visible&&"advanced-cropper-stencil-grid--visible",className)},nodes)},RectangleStencil=(0,react.forwardRef)(function(_a,ref){var cropper=_a.cropper,coordinates=_a.coordinates,aspectRatio=_a.aspectRatio,minAspectRatio=_a.minAspectRatio,maxAspectRatio=_a.maxAspectRatio,_b=_a.handlerComponent,handlerComponent=void 0===_b?SimpleHandler:_b,_c=_a.handlers,handlers=void 0===_c?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:_c,_d=_a.handlerClassNames,handlerClassNames=void 0===_d?{}:_d,_e=_a.handlerWrapperClassNames,handlerWrapperClassNames=void 0===_e?{}:_e,_f=_a.lines,lines=void 0===_f?{west:!0,north:!0,east:!0,south:!0}:_f,_g=_a.lineComponent,lineComponent=void 0===_g?SimpleLine:_g,_h=_a.lineClassNames,lineClassNames=void 0===_h?{}:_h,_j=_a.lineWrapperClassNames,lineWrapperClassNames=void 0===_j?{}:_j,_k=_a.resizable,resizable=void 0===_k||_k,_l=_a.movable,movable=void 0===_l||_l,grid=_a.grid,gridClassName=_a.gridClassName,className=_a.className,movingClassName=_a.movingClassName,resizingClassName=_a.resizingClassName,previewClassName=_a.previewClassName,boundingBoxClassName=_a.boundingBoxClassName,overlayClassName=_a.overlayClassName,draggableAreaClassName=_a.draggableAreaClassName,disabled=_a.disabled,state=cropper.getState(),transitions=cropper.getTransitions(),interactions=cropper.getInteractions(),resizeAllowed=resizable&&!disabled,moveAllowed=movable&&!disabled;(0,react.useImperativeHandle)(ref,function(){return{aspectRatio:(0,service_utils.QX)(aspectRatio||{minimum:minAspectRatio,maximum:maxAspectRatio})}});var _m=coordinates?(0,utils.mg)(coordinates)?coordinates(state):coordinates:(0,helpers.A7)(state),width=_m.width,height=_m.height,left=_m.left,top=_m.top;return state&&react.createElement(StencilWrapper,{className:classnames_default()("advanced-cropper-rectangle-stencil",className,interactions.moveCoordinates&&movingClassName,interactions.resizeCoordinates&&resizingClassName,{"advanced-cropper-rectangle-stencil--movable":moveAllowed,"advanced-cropper-rectangle-stencil--moving":interactions.moveCoordinates,"advanced-cropper-rectangle-stencil--resizable":resizeAllowed,"advanced-cropper-rectangle-stencil--resizing":interactions.resizeCoordinates,"advanced-cropper-rectangle-stencil--disabled":disabled}),width:width,height:height,left:left,top:top,transitions:transitions},react.createElement(BoundingBox,{reference:state.coordinates,className:classnames_default()(boundingBoxClassName,"advanced-cropper-rectangle-stencil__bounding-box"),handlers:handlers,handlerComponent:handlerComponent,handlerClassNames:handlerClassNames,handlerWrapperClassNames:handlerWrapperClassNames,lines:lines,lineComponent:lineComponent,lineClassNames:lineClassNames,lineWrapperClassNames:lineWrapperClassNames,onResize:function(anchor,directions,options){cropper&&resizeAllowed&&cropper.resizeCoordinates(anchor,directions,options)},onResizeEnd:function(){cropper&&cropper.resizeCoordinatesEnd()},disabled:!resizeAllowed},react.createElement(DraggableElement,{disabled:!moveAllowed,onMove:function(directions){cropper&&moveAllowed&&cropper.moveCoordinates(directions)},onMoveEnd:function(){cropper&&cropper.moveCoordinatesEnd()},className:classnames_default()("advanced-cropper-rectangle-stencil__draggable-area",draggableAreaClassName)},react.createElement(StencilOverlay,{className:classnames_default()("advanced-cropper-rectangle-stencil__overlay",overlayClassName)},grid&&react.createElement(StencilGrid,{visible:cropper.hasInteractions(),columns:interactions.transformImage.rotate?9:3,rows:interactions.transformImage.rotate?9:3,className:classnames_default()("advanced-cropper-rectangle-stencil__grid",gridClassName)}),react.createElement("div",{className:classnames_default()("advanced-cropper-rectangle-stencil__preview",previewClassName)})))))});RectangleStencil.displayName="RectangleStencil";var TransformableImageEvent=function(){function TransformableImageEvent(_a){var active=_a.active;this.active=active,this.defaultPrevented=!1}return TransformableImageEvent.prototype.preventDefault=function(){this.defaultPrevented=!0},TransformableImageEvent}(),TransformableImage=function(_super){function TransformableImage(props){var _this=_super.call(this,props)||this;return _this.processMove=function(newTouches){var _a=_this.props,onTransform=_a.onTransform,touchScale=_a.touchScale,touchMove=_a.touchMove,touchRotate=_a.touchRotate,container=_this.container.current;container&&onTransform&&(onTransform(function touchesToImageTransform(touches,previousTouches,container,options){var move,scale,rotate;if(void 0===options&&(options={}),1===previousTouches.length&&1===touches.length)options.move&&(move={left:previousTouches[0].clientX-touches[0].clientX,top:previousTouches[0].clientY-touches[0].clientY});else if(touches.length>1){var previousProperties=calculateGeometricProperties(previousTouches,container),properties=calculateGeometricProperties(touches,container);if(options.rotate&&2===previousTouches.length&&2===touches.length){var diffs={left:[touches[0].clientX-touches[1].clientX,previousTouches[0].clientX-previousTouches[1].clientX],top:[touches[0].clientY-touches[1].clientY,previousTouches[0].clientY-previousTouches[1].clientY]},y=diffs.left[0]*diffs.top[1]-diffs.left[1]*diffs.top[0],x=diffs.left[0]*diffs.left[1]+diffs.top[0]*diffs.top[1];if(!(0,utils.kh)(x,0)&&!(0,utils.kh)(y,0)){var angle=-180*Math.atan2(y,x)/Math.PI;rotate={center:properties.centerMass,angle:angle}}}options.move&&(move={left:previousProperties.centerMass.left-properties.centerMass.left,top:previousProperties.centerMass.top-properties.centerMass.top}),options.scale&&(scale={factor:properties.spread/previousProperties.spread,center:properties.centerMass})}return{move:move,scale:scale,rotate:rotate}}(newTouches,_this.touches,container,{scale:touchScale,rotate:touchRotate,move:touchMove})),_this.touches=newTouches)},_this.processEnd=function(){var onTransformEnd=_this.props.onTransformEnd;_this.transforming&&(_this.transforming=!1,onTransformEnd&&onTransformEnd())},_this.processStart=function(){_this.transforming=!0,_this.debouncedProcessEnd.clear()},_this.processEvent=function(nativeEvent){var _a=_this.props,onEvent=_a.onEvent,disabled=_a.disabled,_b=_a.preventDefault,preventDefault=void 0===_b||_b,transformEvent=new TransformableImageEvent({active:_this.transforming});return onEvent?onEvent(transformEvent,nativeEvent):preventDefault&&(nativeEvent.preventDefault(),nativeEvent.stopPropagation()),!disabled&&!transformEvent.defaultPrevented},_this.onWheel=function(event){var _a=_this.props,onTransform=_a.onTransform,wheelScale=_a.wheelScale,container=_this.container.current;wheelScale&&_this.processEvent(event)&&(_this.processStart(),onTransform&&container&&onTransform(function wheelEventToImageTransform(event,container,ratio){void 0===ratio&&(ratio=.1);var _a=container.getBoundingClientRect(),left=_a.left,top=_a.top;return{scale:{factor:1-ratio*(0,utils.kq)(event.deltaY||event.detail||event.wheelDelta),center:{left:event.clientX-left,top:event.clientY-top}}}}(event,container,!0===wheelScale?.1:wheelScale.ratio)),_this.touches.length||_this.debouncedProcessEnd())},_this.onTouchStart=function(event){var _a=_this.props,touchMove=_a.touchMove,touchScale=_a.touchScale,touchRotate=_a.touchRotate;if(event.cancelable&&(touchMove||(touchScale||touchRotate)&&event.touches.length>1)&&_this.processEvent(event)){var container=_this.container.current;if(container){var _b=container.getBoundingClientRect(),left_1=_b.left,top_1=_b.top,bottom_1=_b.bottom,right_1=_b.right;_this.touches=Array.from(event.touches).filter(function(touch){return touch.clientX>left_1&&touch.clientX<right_1&&touch.clientY>top_1&&touch.clientY<bottom_1})}}},_this.onTouchEnd=function(event){0===event.touches.length&&(_this.touches=[],_this.processEnd())},_this.onTouchMove=function(event){if(_this.touches.length){var touches=(0,tslib_es6.Mt)([],(0,tslib_es6.o5)(event.touches),!1).filter(function(touch){return!touch.identifier||_this.touches.find(function(anotherTouch){return anotherTouch.identifier===touch.identifier})});_this.processEvent(event)&&(_this.processMove(touches),_this.processStart())}},_this.onMouseDown=function(event){if(_this.props.mouseMove&&"buttons"in event&&1===event.buttons&&_this.processEvent(event)){var touch={clientX:event.clientX,clientY:event.clientY};_this.touches=[touch],_this.processStart()}},_this.onMouseMove=function(event){_this.touches.length&&_this.processEvent(event)&&_this.processMove([{clientX:event.clientX,clientY:event.clientY}])},_this.onMouseUp=function(){_this.touches=[],_this.processEnd()},_this.transforming=!1,_this.touches=[],_this.anchor={left:0,top:0},_this.container=(0,react.createRef)(),_this.debouncedProcessEnd=(0,utils.Cu)(_this.processEnd,props.timeout),_this}return(0,tslib_es6.ct)(TransformableImage,_super),TransformableImage.prototype.shouldComponentUpdate=function(){return!0},TransformableImage.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var container=this.container.current;container&&(container.removeEventListener("touchstart",this.onTouchStart),container.removeEventListener("mousedown",this.onMouseDown),container.removeEventListener("wheel",this.onWheel))},TransformableImage.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var container=this.container.current;container&&(container.addEventListener("touchstart",this.onTouchStart,{passive:!1}),container.addEventListener("mousedown",this.onMouseDown,{passive:!1}),container.addEventListener("wheel",this.onWheel,{passive:!1}))},TransformableImage.prototype.render=function(){var _a=this.props,className=_a.className,children=_a.children,style=_a.style;return react.createElement("div",{className:className,style:style,ref:this.container},children)},TransformableImage.defaultProps={touchMove:!0,mouseMove:!0,touchScale:!0,touchRotate:!1,wheelScale:!0,timeout:500},TransformableImage}(react.Component),CropperBackgroundWrapper=function(_a){var _b=_a.scaleImage,scaleImage=void 0===_b||_b,_c=_a.moveImage,moveImage=void 0===_c||_c,_d=_a.rotateImage,rotateImage=void 0!==_d&&_d,children=_a.children,className=_a.className,style=_a.style,cropper=_a.cropper,timeout=_a.timeout,disabled=_a.disabled,transitions=cropper.getTransitions(),rotateImageOptions=function useRotateImageOptions(rotateImage){return(0,react.useMemo)(function(){return(0,utils.KG)(rotateImage,{touch:!0},{touch:!1})},[rotateImage])}(rotateImage),scaleImageOptions=function useScaleImageOptions(scaleImage){return(0,react.useMemo)(function(){return(0,utils.KG)(scaleImage,{touch:!0,wheel:{ratio:.1}},{touch:!1,wheel:!1})},[scaleImage])}(scaleImage),moveImageOptions=function useMoveImageOptions(moveImage){return(0,react.useMemo)(function(){return(0,utils.KG)(moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1})},[moveImage])}(moveImage);return react.createElement(TransformableImage,{className:className,style:style,onTransform:cropper.transformImage,onTransformEnd:cropper.transformImageEnd,touchMove:moveImageOptions.touch,mouseMove:moveImageOptions.mouse,touchScale:scaleImageOptions.touch,wheelScale:scaleImageOptions.wheel,touchRotate:rotateImageOptions.touch,disabled:transitions.active||disabled,preventDefault:!disabled,timeout:timeout},children)},AbstractCropper=function createCropper(render){return(0,react.forwardRef)(render)}(function(props,ref){var style=props.style,className=props.className,_a=props.stencilComponent,stencilComponent=void 0===_a?RectangleStencil:_a,_b=props.stencilConstraints,stencilConstraints=void 0===_b?defaultStencilConstraints:_b,_c=props.stencilProps,stencilProps=void 0===_c?{}:_c,_d=props.wrapperComponent,wrapperComponent=void 0===_d?CropperWrapper:_d,_e=props.wrapperProps,wrapperProps=void 0===_e?{}:_e,_f=props.backgroundComponent,backgroundComponent=void 0===_f?CropperBackgroundImage:_f,_g=props.backgroundProps,backgroundProps=void 0===_g?{}:_g,backgroundClassName=props.backgroundClassName,_h=props.backgroundWrapperComponent,backgroundWrapperComponent=void 0===_h?CropperBackgroundWrapper:_h,_j=props.backgroundWrapperProps,backgroundWrapperProps=void 0===_j?{}:_j,_k=props.boundaryComponent,boundaryComponent=void 0===_k?StretchableBoundary:_k,boundaryProps=props.boundaryProps,boundaryClassName=props.boundaryClassName,_l=props.canvas,canvas=void 0===_l||_l,_m=props.crossOrigin,crossOrigin=void 0===_m||_m,disabled=props.disabled,settings=props.settings,parameters=(0,tslib_es6.sX)(props,["style","className","stencilComponent","stencilConstraints","stencilProps","wrapperComponent","wrapperProps","backgroundComponent","backgroundProps","backgroundClassName","backgroundWrapperComponent","backgroundWrapperProps","boundaryComponent","boundaryProps","boundaryClassName","canvas","crossOrigin","disabled","settings"]),stencilRef=(0,react.useRef)(null),_o=useAbstractCropper(function(){return(0,tslib_es6.C3)((0,tslib_es6.C3)({},parameters),{crossOrigin:crossOrigin,stencilProps:stencilProps,canvas:canvas,settings:(0,tslib_es6.C3)((0,tslib_es6.C3)({},settings),stencilConstraints(settings,(0,tslib_es6.C3)((0,tslib_es6.C3)({},stencilProps),stencilRef.current)))})}),cropper=_o.cropper,image=_o.image,refs=_o.refs,StencilComponent=stencilComponent,WrapperComponent=wrapperComponent,BackgroundWrapperComponent=backgroundWrapperComponent,BackgroundComponent=backgroundComponent,BoundaryComponent=boundaryComponent;(0,react.useImperativeHandle)(ref,function(){return cropper});var deprecatedWrapperProps={loading:cropper.isLoading(),loaded:cropper.isLoaded()};return react.createElement(WrapperComponent,(0,tslib_es6.C3)({},wrapperProps,{disabled:disabled,className:classnames_default()("advanced-cropper",className),cropper:cropper,style:style},deprecatedWrapperProps),react.createElement(BoundaryComponent,(0,tslib_es6.C3)({},boundaryProps,{ref:refs.boundary,className:classnames_default()("advanced-cropper__boundary",boundaryClassName)}),react.createElement(BackgroundWrapperComponent,(0,tslib_es6.C3)({},backgroundWrapperProps,{disabled:disabled,cropper:cropper,className:"advanced-cropper__background-wrapper"}),cropper.getState()&&react.createElement(BackgroundComponent,(0,tslib_es6.C3)({},backgroundProps,{ref:refs.image,crossOrigin:crossOrigin,cropper:cropper,className:classnames_default()("advanced-cropper__background",backgroundClassName)})),react.createElement(StencilComponent,(0,tslib_es6.C3)({},stencilProps,{disabled:disabled,ref:stencilRef,cropper:cropper,image:image}))),canvas&&react.createElement(CropperCanvas,{ref:refs.canvas})))}),defaultSettings=["transformImage","moveCoordinates","resizeCoordinates","defaultCoordinates","defaultVisibleArea","areaPositionRestrictions","areaSizeRestrictions","sizeRestrictions","positionRestrictions","aspectRatio","minWidth","minHeight","maxWidth","maxHeight","defaultSize","defaultPosition","defaultTransforms","imageRestriction","priority"];function useAbstractCropperProps(props,settings){void 0===settings&&(settings=defaultSettings);var result={settings:{},props:{}};return Object.keys(props).forEach(function(key){settings.some(function(setting){return setting===key})?result.settings[key]=props[key]:result.props[key]=props[key]}),result}var FixedCropper=(0,react.forwardRef)(function(props,ref){var cropperProps=useAbstractCropperProps(props,(0,tslib_es6.Mt)((0,tslib_es6.Mt)([],(0,tslib_es6.o5)(defaultSettings),!1),["stencilSize"],!1));return react.createElement(AbstractCropper,(0,tslib_es6.C3)({postProcess:fixedStencil,stencilConstraints:fixedStencilConstraints},cropperProps.props,{settings:(0,tslib_es6.C3)((0,tslib_es6.C3)({defaultSize:stencil_size_defaultSize,aspectRatio:aspectRatio,sizeRestrictions:withDefaultSizeRestrictions(sizeRestrictions)},cropperProps.settings),{transformImage:(0,tslib_es6.C3)((0,tslib_es6.C3)({},cropperProps.settings.transformImage),{adjustStencil:!1})}),ref:ref}))});FixedCropper.displayName="FixedCropper";var Cropper=(0,react.forwardRef)(function(props,ref){var cropperProps=useAbstractCropperProps(props),intrinsicProps=cropperProps.props,_a=cropperProps.settings,stencilSize=_a.stencilSize,autoZoom=_a.autoZoom,actualSettings=(0,tslib_es6.sX)(_a,["stencilSize","autoZoom"]),deprecationWarning=useDeprecationWarning();return(0,utils.Y3)(autoZoom)||(intrinsicProps.postProcess||stencilSize?deprecationWarning("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function."):(deprecationWarning("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'"),intrinsicProps.postProcess=hybridStencilAutoZoom)),(0,utils.Y3)(stencilSize)?react.createElement(AbstractCropper,(0,tslib_es6.C3)({},intrinsicProps,{ref:ref,settings:actualSettings})):(deprecationWarning("prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead."),react.createElement(FixedCropper,(0,tslib_es6.C3)({ref:ref,stencilSize:stencilSize},actualSettings,intrinsicProps)))});Cropper.displayName="CropperComponent";var CircleStencil=(0,react.forwardRef)(function(_a,ref){var cropper=_a.cropper,coordinates=_a.coordinates,_b=_a.handlerComponent,handlerComponent=void 0===_b?SimpleHandler:_b,_c=_a.handlers,handlers=void 0===_c?{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}:_c,_d=_a.handlerClassNames,handlerClassNames=void 0===_d?{}:_d,_e=_a.handlerWrapperClassNames,handlerWrapperClassNames=void 0===_e?{}:_e,_f=_a.lines,lines=void 0===_f?{west:!0,north:!0,east:!0,south:!0}:_f,_g=_a.lineComponent,lineComponent=void 0===_g?SimpleLine:_g,_h=_a.lineClassNames,lineClassNames=void 0===_h?{}:_h,_j=_a.lineWrapperClassNames,lineWrapperClassNames=void 0===_j?{}:_j,_k=_a.resizable,resizable=void 0===_k||_k,_l=_a.movable,movable=void 0===_l||_l,grid=_a.grid,gridClassName=_a.gridClassName,className=_a.className,movingClassName=_a.movingClassName,resizingClassName=_a.resizingClassName,previewClassName=_a.previewClassName,boundingBoxClassName=_a.boundingBoxClassName,overlayClassName=_a.overlayClassName,draggableAreaClassName=_a.draggableAreaClassName,disabled=_a.disabled,state=cropper.getState(),transitions=cropper.getTransitions(),interactions=cropper.getInteractions(),resizeAllowed=resizable&&!disabled,moveAllowed=movable&&!disabled;(0,react.useImperativeHandle)(ref,function(){return{aspectRatio:1,boundingBox:"circle"}});var _m=coordinates?(0,utils.mg)(coordinates)?coordinates(state):coordinates:(0,helpers.A7)(state),width=_m.width,height=_m.height,left=_m.left,top=_m.top;return state&&react.createElement(StencilWrapper,{className:classnames_default()("advanced-cropper-circle-stencil",className,interactions.moveCoordinates&&movingClassName,interactions.resizeCoordinates&&resizingClassName,{"advanced-cropper-circle-stencil--movable":moveAllowed,"advanced-cropper-circle-stencil--moving":interactions.moveCoordinates,"advanced-cropper-circle-stencil--resizable":resizeAllowed,"advanced-cropper-circle-stencil--resizing":interactions.resizeCoordinates,"advanced-cropper-circle-stencil--disabled":disabled}),width:width,height:height,left:left,top:top,transitions:transitions},react.createElement(BoundingBox,{reference:state.coordinates,className:classnames_default()(boundingBoxClassName,"advanced-cropper-circle-stencil__bounding-box"),handlers:handlers,handlerComponent:handlerComponent,handlerClassNames:handlerClassNames,handlerWrapperClassNames:handlerWrapperClassNames,lines:lines,lineComponent:lineComponent,lineClassNames:lineClassNames,lineWrapperClassNames:lineWrapperClassNames,onResize:function(anchor,directions,options){cropper&&resizeAllowed&&cropper.resizeCoordinates(anchor,directions,options)},onResizeEnd:function(){cropper&&cropper.resizeCoordinatesEnd()},disabled:!resizeAllowed},react.createElement(DraggableElement,{disabled:!moveAllowed,onMove:function(directions){cropper&&moveAllowed&&cropper.moveCoordinates(directions)},onMoveEnd:function(){cropper&&cropper.moveCoordinatesEnd()},className:classnames_default()("advanced-cropper-circle-stencil__draggable-area",draggableAreaClassName)},react.createElement(StencilOverlay,{className:classnames_default()("advanced-cropper-circle-stencil__overlay",overlayClassName)},grid&&react.createElement(StencilGrid,{visible:cropper.hasInteractions(),columns:interactions.transformImage.rotate?9:3,rows:interactions.transformImage.rotate?9:3,className:classnames_default()("advanced-cropper-circle-stencil__grid",gridClassName)}),react.createElement("div",{className:classnames_default()("advanced-cropper-circle-stencil__preview",previewClassName)})))))});CircleStencil.displayName="CircleStencil";var CropperSource=(0,react.forwardRef)(function(_a,ref){var src=_a.src,_b=_a.crossOrigin,crossOrigin=void 0===_b||_b,props=(0,tslib_es6.sX)(_a,["src","crossOrigin"]);return src?react.createElement("img",(0,tslib_es6.C3)({key:src,ref:ref,src:src,className:classnames_default()("advanced-cropper-source"),crossOrigin:!0===crossOrigin?"anonymous":crossOrigin||void 0},props)):null});CropperSource.displayName="CropperSource";var CropperPreviewWrapper=function(_a){var children=_a.children,cropper=_a.cropper,className=_a.className,style=_a.style;return react.createElement("div",{className:classnames_default()(className,"cropper-preview-wrapper"),style:style},react.createElement(CropperFade,{visible:null==cropper?void 0:cropper.isLoaded(),className:"cropper-preview-wrapper__fade"},children))},CropperPreviewBackground=function(_a){var className=_a.className,cropper=_a.cropper,_b=_a.crossOrigin,crossOrigin=void 0===_b||_b,size=_a.size,style=_a.style,state=cropper.getState(),transitions=cropper.getTransitions(),image=cropper.getImage(),transformStyles=size&&image&&(null==state?void 0:state.coordinates)?(0,advanced_cropper_image.is)(image,state,size,transitions):{},src=image?image.src:void 0;return src?react.createElement("img",{key:src,className:classnames_default()("advanced-cropper-background-image",className),src:src,crossOrigin:!0===crossOrigin?"anonymous":crossOrigin||void 0,style:(0,tslib_es6.C3)((0,tslib_es6.C3)({},transformStyles),style),onMouseDown:preventDefault}):null},CropperPreview=(0,react.forwardRef)(function(_a,ref){var _b,_c,_d,_e,className=_a.className,contentClassName=_a.contentClassName,_f=_a.state,state=void 0===_f?null:_f,_g=_a.image,image=void 0===_g?null:_g,_h=_a.transitions,transitions=void 0===_h?null:_h,_j=_a.backgroundComponent,backgroundComponent=void 0===_j?CropperPreviewBackground:_j,backgroundProps=_a.backgroundProps,backgroundClassName=_a.backgroundClassName,_k=_a.boundaryComponent,boundaryComponent=void 0===_k?StretchableBoundary:_k,boundaryProps=_a.boundaryProps,boundaryClassName=_a.boundaryClassName,_l=_a.wrapperComponent,wrapperComponent=void 0===_l?CropperPreviewWrapper:_l,wrapperProps=_a.wrapperProps,_m=_a.loaded,loaded=void 0===_m||_m,_o=_a.loading,loading=void 0!==_o&&_o,style=_a.style,cropper=_a.cropper,rerender=useForceRerender(),boundaryRef=(0,react.useRef)(null),internalInstance=(0,react.useRef)(null),instance=cropper||(internalInstance.current?internalInstance:{current:{getState:function(){return state},getTransitions:function(){return transitions},getImage:function(){return image},isLoaded:function(){return loaded},isLoading:function(){return loading}}}),_p=(0,tslib_es6.o5)((0,react.useState)(null),2),size=_p[0],setSize=_p[1],coordinates=null===(_c=null===(_b=instance.current)||void 0===_b?void 0:_b.getState())||void 0===_c?void 0:_c.coordinates,src=null===(_e=null===(_d=instance.current)||void 0===_d?void 0:_d.getImage())||void 0===_e?void 0:_e.src,contentStyle=size?{width:"".concat(size.width,"px"),height:"".concat(size.height,"px")}:{},refresh=function(){var _a,_b,coordinates=null===(_b=null===(_a=instance.current)||void 0===_a?void 0:_a.getState())||void 0===_b?void 0:_b.coordinates;boundaryRef.current&&coordinates&&boundaryRef.current.stretchTo(coordinates).then(function(size){size&&coordinates?(0,utils.mc)((0,service_utils.GI)(coordinates),(0,service_utils.GI)(size))?setSize({width:size.width,height:size.width/(0,service_utils.GI)(coordinates)}):setSize({width:size.height*(0,service_utils.GI)(coordinates),height:size.height}):setSize(null)}),rerender()};useWindowResize(refresh),(0,react.useLayoutEffect)(refresh,[null==coordinates?void 0:coordinates.height,null==coordinates?void 0:coordinates.width]),(0,react.useImperativeHandle)(ref,function(){return{refresh:refresh,update:function(cropper){internalInstance.current=cropper||null,refresh()}}});var WrapperComponent=wrapperComponent,BackgroundComponent=backgroundComponent,BoundaryComponent=boundaryComponent;return react.createElement(WrapperComponent,(0,tslib_es6.C3)({},wrapperProps,{className:classnames_default()(className,"advanced-cropper-preview"),cropper:instance.current,style:style}),react.createElement(BoundaryComponent,(0,tslib_es6.C3)({ref:boundaryRef,stretchAlgorithm:stretchPreviewBoundary},boundaryProps,{className:classnames_default()("advanced-cropper-preview__boundary",boundaryClassName)}),react.createElement("div",{className:classnames_default()(contentClassName,"advanced-cropper-preview__content"),style:contentStyle},instance.current&&react.createElement(BackgroundComponent,(0,tslib_es6.C3)({},backgroundProps,{cropper:instance.current,size:size,className:classnames_default()(backgroundClassName,"advanced-cropper-preview__image",src&&"advanced-cropper-preview__image--visible")})))))});function mergeRefs(refs){return function(value){refs.forEach(function(ref){"function"==typeof ref?ref(value):null!=ref&&(ref.current=value)})}}}}]);