import { Meta, Canvas, Story } from '@storybook/blocks';
import * as ButtonStories from './Button.stories';

<Meta of={ButtonStories} />

# Button

Simple and versatile button component used throughout the image editor interface. Supports active and disabled states, and accepts icons as content.

## Overview

The `Button` is a basic UI component that provides clear visual feedback about its current state through CSS classes. It is primarily used in the editor's navigation bar.

---

## Examples

### Default

Button in default state, ready for interaction.

<Canvas of={ButtonStories.Default} />

### Active

Active state indicates that the button/mode is selected.

<Canvas of={ButtonStories.Active} />

### Disabled

Disabled state prevents interaction and reduces opacity.

<Canvas of={ButtonStories.Disabled} />

### With Icon

Buttons commonly use SVG icons as content.

<Canvas of={ButtonStories.WithIcon} />

### Active Icon

Icon in active state (selected mode).

<Canvas of={ButtonStories.WithIconActive} />

### Disabled Icon

Icon in disabled state.

<Canvas of={ButtonStories.WithIconDisabled} />

---

## How to Use

### Basic

```tsx
import { Button } from '@plone-collective/volto-image-editor/components/ImageEditor/components/Button';

<Button onClick={() => console.log('Clicked')}>Click me</Button>;
```

### With Active State

```tsx
const [activeMode, setActiveMode] = useState('crop');

<Button active={activeMode === 'crop'} onClick={() => setActiveMode('crop')}>
  Crop
</Button>;
```

### With Icon

```tsx
import { CropIcon } from '@plone-collective/volto-image-editor/icons/CropIcon';

<Button onClick={handleCrop}>
  <CropIcon />
</Button>;
```

### Disabled

```tsx
<Button disabled onClick={handleAction}>
  Unavailable
</Button>
```

---

## Use Cases

### Toolbar

```tsx
function Toolbar() {
  const [mode, setMode] = useState('crop');

  return (
    <div className="toolbar">
      <Button active={mode === 'crop'} onClick={() => setMode('crop')}>
        <CropIcon />
      </Button>
      <Button active={mode === 'rotate'} onClick={() => setMode('rotate')}>
        <RotateIcon />
      </Button>
      <Button active={mode === 'adjust'} onClick={() => setMode('adjust')}>
        <AdjustIcon />
      </Button>
    </div>
  );
}
```

### Action Buttons

```tsx
function Actions({ onSave, onCancel, canSave }) {
  return (
    <div className="actions">
      <Button onClick={onCancel}>Cancel</Button>
      <Button onClick={onSave} disabled={!canSave} active>
        Save
      </Button>
    </div>
  );
}
```

---

## Styling

### CSS Classes

The component applies the following classes:

- `image-editor-button`: Base class
- `image-editor-button--active`: When `active={true}`
- Plus any custom `className` passed via props

### Customization

```scss
.image-editor-button {
  // Your base styles
  background: #f3f4f6;
  border: 1px solid #d1d5db;

  &:hover {
    background: #e5e7eb;
  }

  &--active {
    background: #3b82f6;
    color: white;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}
```

---

## Accessibility

### Implemented

- Native `<button>` tag with proper semantics
- `disabled` state blocks interaction
- Full keyboard support (Space/Enter)
- Clear visual states (hover, active, disabled)

### Recommendations

- Use `aria-label` when button contains only icon:

  ```tsx
  <Button aria-label="Rotate image left">
    <RotateLeftIcon />
  </Button>
  ```

- For button groups, use `role="group"` and `aria-label`:
  ```tsx
  <div role="group" aria-label="Image adjustment tools">
    <Button>...</Button>
    <Button>...</Button>
  </div>
  ```

---

## Props

### children

- **Type**: `React.ReactNode`
- **Required**: âœ…
- **Description**: Button content (text, icon, or both)

### active

- **Type**: `boolean`
- **Default**: `false`
- **Description**: Defines if the button is in active/selected state

### disabled

- **Type**: `boolean`
- **Default**: `false`
- **Description**: Disables the button and prevents interaction

### onClick

- **Type**: `(event: React.MouseEvent<HTMLButtonElement>) => void`
- **Description**: Handler called when clicking the button

### className

- **Type**: `string`
- **Description**: Additional CSS classes for customization

### Other Props

The component accepts all standard `HTMLButtonElement` props through `...props`.

---

## Best Practices

### Do

- Use for simple and direct actions
- Combine with icons for compact interfaces
- Keep labels clear and concise
- Use `active` to indicate selection/current state
- Disable buttons when action is not available

### Avoid

- Don't use for navigation (use links)
- Don't put buttons inside buttons
- Avoid very long texts (break into multiple lines if needed)
- Don't rely only on color to indicate state (use icons/text too)

---

## Related Components

- **Navigation**: Uses multiple Buttons to create the toolbar
- **SettingsModal**: Uses Button for modal toggle
