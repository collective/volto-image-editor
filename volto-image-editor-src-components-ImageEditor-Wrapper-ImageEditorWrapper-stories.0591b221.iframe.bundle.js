"use strict";(self.webpackChunk_plone_volto=self.webpackChunk_plone_volto||[]).push([[4404],{"../../../packages/volto-image-editor/src/components/ImageEditor/Wrapper/ImageEditorWrapper.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomButtonText:function(){return CustomButtonText},Default:function(){return Default},InFormContext:function(){return InFormContext},PortraitImage:function(){return PortraitImage},WithoutInitialImage:function(){return WithoutInitialImage},__namedExportsOrder:function(){return __namedExportsOrder}});var _home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_ImageEditorWrapper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../packages/volto-image-editor/src/components/ImageEditor/Wrapper/ImageEditorWrapper.tsx"),_stories_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../packages/volto-image-editor/src/stories/utils.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;const demoImageSrc=(0,_stories_utils__WEBPACK_IMPORTED_MODULE_2__.i)(960,640),portraitImageSrc=(0,_stories_utils__WEBPACK_IMPORTED_MODULE_2__.i)(640,960),meta={title:"ImageEditor/ImageEditorWrapper",component:_ImageEditorWrapper__WEBPACK_IMPORTED_MODULE_1__.c,parameters:{layout:"centered",docs:{description:{component:'Wrapper that integrates the image editor with Plone/Volto widgets. Opens editor in a modal and handles data format conversion between Plone format and data URLs. Click "Edit image" to open the modal editor.'}}},argTypes:{value:{control:!1,description:"Plone-style image value with download URL, filename, and content-type"},setData:{control:!1,description:"Callback function to update the widget value after editing"},buttonText:{control:"text",description:"Custom text for the edit button"}}};__webpack_exports__.default=meta;const Default={name:"With Image Preview",parameters:{docs:{description:{story:"Complete integration showing the edit button, modal editor, and preview of saved results. After editing and saving, the new image is shown with metadata."}}},render:()=>__jsx(function DefaultStory(){const[value,setValue]=react__WEBPACK_IMPORTED_MODULE_0__.useState({download:demoImageSrc,filename:"demo.jpg","content-type":"image/jpeg"});return __jsx("div",{style:{width:980}},__jsx("div",{style:{marginBottom:12,padding:12,background:"#f0f9ff",borderRadius:6,fontSize:14}},'Click the "Edit image" button to open the editor modal'),__jsx(_ImageEditorWrapper__WEBPACK_IMPORTED_MODULE_1__.c,{value:value,setData:newValue=>{setValue(newValue)}}),(null==value?void 0:value.data)&&__jsx("div",{style:{marginTop:16}},__jsx("div",{style:{marginBottom:8,fontWeight:600,fontSize:14}},"Saved preview:"),__jsx(_stories_utils__WEBPACK_IMPORTED_MODULE_2__.C,{width:640,height:426},__jsx("img",{src:`data:${value["content-type"]};base64,${value.data}`,alt:"Saved",style:{width:"100%",height:"100%",objectFit:"contain"}})),__jsx("div",{style:{marginTop:8,padding:8,background:"#f9fafb",borderRadius:4,fontSize:12}},__jsx("strong",null,"Filename:")," ",value.filename,__jsx("br",null),__jsx("strong",null,"Content-Type:")," ",value["content-type"],__jsx("br",null),__jsx("strong",null,"Data size:")," ",value.data.length," bytes (base64)")))},null)},WithoutInitialImage={name:"Async Image Loading",parameters:{docs:{description:{story:"Demonstrates loading an image asynchronously after component mount. This is common when fetching content from an API or waiting for image upload."}}},render:()=>__jsx(function WithoutImageStory(){const[value,setValue]=react__WEBPACK_IMPORTED_MODULE_0__.useState(null);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{const timer=setTimeout(()=>{setValue({download:demoImageSrc,filename:"loaded-demo.jpg","content-type":"image/jpeg"})},500);return()=>clearTimeout(timer)},[]),value?__jsx("div",{style:{width:980}},__jsx(_ImageEditorWrapper__WEBPACK_IMPORTED_MODULE_1__.c,{value:value,setData:newValue=>{setValue(newValue)}})):__jsx("div",{style:{padding:24,textAlign:"center"}},"Loading image...")},null)},PortraitImage={name:"Portrait Image",parameters:{docs:{description:{story:"Editor with a portrait-oriented image (640x960). Shows how the editor adapts to different aspect ratios."}}},render:()=>__jsx(function PortraitStory(){const[value,setValue]=react__WEBPACK_IMPORTED_MODULE_0__.useState({download:portraitImageSrc,filename:"portrait.jpg","content-type":"image/jpeg"});return __jsx("div",{style:{width:980}},__jsx("div",{style:{marginBottom:12,padding:12,background:"#f0f9ff",borderRadius:6,fontSize:14}},"Try editing this portrait-oriented image"),__jsx(_ImageEditorWrapper__WEBPACK_IMPORTED_MODULE_1__.c,{value:value,setData:setValue}))},null)},CustomButtonText={name:"Custom Button Text",parameters:{docs:{description:{story:"Demonstrates using custom text for the edit button. Useful for internationalization or specific use cases."}}},render:()=>__jsx(function CustomButtonStory(){const[value,setValue]=react__WEBPACK_IMPORTED_MODULE_0__.useState({download:demoImageSrc,filename:"demo.jpg","content-type":"image/jpeg"});return __jsx("div",{style:{width:980}},__jsx(_ImageEditorWrapper__WEBPACK_IMPORTED_MODULE_1__.c,{value:value,setData:setValue,buttonText:"ðŸŽ¨ Crop and Enhance"}))},null)},InFormContext={name:"In Form Context",parameters:{docs:{description:{story:"Simulates usage within a form with multiple fields. Shows how the editor integrates with other form elements."}}},render:()=>__jsx(function FormContextStory(){var _formData$image,_formData$image2;const[formData,setFormData]=react__WEBPACK_IMPORTED_MODULE_0__.useState({title:"My Article",description:"This is a great article with an image",image:{download:demoImageSrc,filename:"article-image.jpg","content-type":"image/jpeg"}});return __jsx("div",{style:{width:980}},__jsx("div",{style:{padding:24,background:"#f9fafb",borderRadius:8,border:"1px solid #e5e7eb"}},__jsx("div",{style:{marginBottom:16}},__jsx("label",{htmlFor:"title",style:{display:"block",marginBottom:4,fontWeight:600,fontSize:14}},"Title"),__jsx("input",{id:"title",type:"text",value:formData.title,onChange:e=>setFormData((0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)((0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)({},formData),{},{title:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #d1d5db",borderRadius:4}})),__jsx("div",{style:{marginBottom:16}},__jsx("label",{htmlFor:"description",style:{display:"block",marginBottom:4,fontWeight:600,fontSize:14}},"Description"),__jsx("textarea",{id:"description",value:formData.description,onChange:e=>setFormData((0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)((0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)({},formData),{},{description:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #d1d5db",borderRadius:4,minHeight:80}})),__jsx("div",{style:{marginBottom:16}},__jsx("label",{htmlFor:"featured-image",style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14}},"Featured Image"),(null===(_formData$image=formData.image)||void 0===_formData$image?void 0:_formData$image.download)&&__jsx("div",{style:{marginBottom:12}},__jsx("img",{id:"featured-image",src:formData.image.data?`data:${formData.image["content-type"]};base64,${formData.image.data}`:formData.image.download,alt:"Featured"})),__jsx(_ImageEditorWrapper__WEBPACK_IMPORTED_MODULE_1__.c,{value:formData.image,setData:newImage=>{setFormData((0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)((0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)({},formData),{},{image:newImage}))}})),__jsx("div",{style:{marginTop:24,padding:12,background:"#eff6ff",borderRadius:4,fontSize:13}},__jsx("strong",null,"Form Data Preview:"),__jsx("pre",{style:{marginTop:8,fontSize:11,overflow:"auto"}},JSON.stringify((0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)((0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)({},formData),{},{image:null!==(_formData$image2=formData.image)&&void 0!==_formData$image2&&_formData$image2.data?(0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)((0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.c)({},formData.image),{},{data:`${formData.image.data.substring(0,50)}... (${formData.image.data.length} chars)`}):formData.image}),null,2)))))},null)},__namedExportsOrder=["Default","WithoutInitialImage","PortraitImage","CustomButtonText","InFormContext"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  name: 'With Image Preview',\n  parameters: {\n    docs: {\n      description: {\n        story: 'Complete integration showing the edit button, modal editor, and preview of saved results. After editing and saving, the new image is shown with metadata.'\n      }\n    }\n  },\n  render: () => {\n    function DefaultStory() {\n      const [value, setValue] = React.useState<any>({\n        download: demoImageSrc,\n        filename: 'demo.jpg',\n        'content-type': 'image/jpeg'\n      });\n      const handleSetData = (newValue: any) => {\n        setValue(newValue);\n      };\n      return <div style={{\n        width: 980\n      }}>\n          <div style={{\n          marginBottom: 12,\n          padding: 12,\n          background: '#f0f9ff',\n          borderRadius: 6,\n          fontSize: 14\n        }}>\n            Click the \"Edit image\" button to open the editor modal\n          </div>\n          <ImageEditorWrapper value={value} setData={handleSetData} />\n          {value?.data && <div style={{\n          marginTop: 16\n        }}>\n              <div style={{\n            marginBottom: 8,\n            fontWeight: 600,\n            fontSize: 14\n          }}>\n                Saved preview:\n              </div>\n              <DemoContainer width={640} height={426}>\n                <img src={`data:${value['content-type']};base64,${value.data}`} alt=\"Saved\" style={{\n              width: '100%',\n              height: '100%',\n              objectFit: 'contain'\n            }} />\n              </DemoContainer>\n              <div style={{\n            marginTop: 8,\n            padding: 8,\n            background: '#f9fafb',\n            borderRadius: 4,\n            fontSize: 12\n          }}>\n                <strong>Filename:</strong> {value.filename}\n                <br />\n                <strong>Content-Type:</strong> {value['content-type']}\n                <br />\n                <strong>Data size:</strong> {value.data.length} bytes (base64)\n              </div>\n            </div>}\n        </div>;\n    }\n    return <DefaultStory />;\n  }\n}",...Default.parameters?.docs?.source}}},WithoutInitialImage.parameters={...WithoutInitialImage.parameters,docs:{...WithoutInitialImage.parameters?.docs,source:{originalSource:"{\n  name: 'Async Image Loading',\n  parameters: {\n    docs: {\n      description: {\n        story: 'Demonstrates loading an image asynchronously after component mount. This is common when fetching content from an API or waiting for image upload.'\n      }\n    }\n  },\n  render: () => {\n    function WithoutImageStory() {\n      const [value, setValue] = React.useState<any>(null);\n      React.useEffect(() => {\n        // Simulate loading image after mount\n        const timer = setTimeout(() => {\n          setValue({\n            download: demoImageSrc,\n            filename: 'loaded-demo.jpg',\n            'content-type': 'image/jpeg'\n          });\n        }, 500);\n        return () => clearTimeout(timer);\n      }, []);\n      const handleSetData = (newValue: any) => {\n        setValue(newValue);\n      };\n      if (!value) {\n        return <div style={{\n          padding: 24,\n          textAlign: 'center'\n        }}>\n            Loading image...\n          </div>;\n      }\n      return <div style={{\n        width: 980\n      }}>\n          <ImageEditorWrapper value={value} setData={handleSetData} />\n        </div>;\n    }\n    return <WithoutImageStory />;\n  }\n}",...WithoutInitialImage.parameters?.docs?.source}}},PortraitImage.parameters={...PortraitImage.parameters,docs:{...PortraitImage.parameters?.docs,source:{originalSource:"{\n  name: 'Portrait Image',\n  parameters: {\n    docs: {\n      description: {\n        story: 'Editor with a portrait-oriented image (640x960). Shows how the editor adapts to different aspect ratios.'\n      }\n    }\n  },\n  render: () => {\n    function PortraitStory() {\n      const [value, setValue] = React.useState<any>({\n        download: portraitImageSrc,\n        filename: 'portrait.jpg',\n        'content-type': 'image/jpeg'\n      });\n      return <div style={{\n        width: 980\n      }}>\n          <div style={{\n          marginBottom: 12,\n          padding: 12,\n          background: '#f0f9ff',\n          borderRadius: 6,\n          fontSize: 14\n        }}>\n            Try editing this portrait-oriented image\n          </div>\n          <ImageEditorWrapper value={value} setData={setValue} />\n        </div>;\n    }\n    return <PortraitStory />;\n  }\n}",...PortraitImage.parameters?.docs?.source}}},CustomButtonText.parameters={...CustomButtonText.parameters,docs:{...CustomButtonText.parameters?.docs,source:{originalSource:"{\n  name: 'Custom Button Text',\n  parameters: {\n    docs: {\n      description: {\n        story: 'Demonstrates using custom text for the edit button. Useful for internationalization or specific use cases.'\n      }\n    }\n  },\n  render: () => {\n    function CustomButtonStory() {\n      const [value, setValue] = React.useState<any>({\n        download: demoImageSrc,\n        filename: 'demo.jpg',\n        'content-type': 'image/jpeg'\n      });\n      return <div style={{\n        width: 980\n      }}>\n          <ImageEditorWrapper value={value} setData={setValue} buttonText=\"ðŸŽ¨ Crop and Enhance\" />\n        </div>;\n    }\n    return <CustomButtonStory />;\n  }\n}",...CustomButtonText.parameters?.docs?.source}}},InFormContext.parameters={...InFormContext.parameters,docs:{...InFormContext.parameters?.docs,source:{originalSource:"{\n  name: 'In Form Context',\n  parameters: {\n    docs: {\n      description: {\n        story: 'Simulates usage within a form with multiple fields. Shows how the editor integrates with other form elements.'\n      }\n    }\n  },\n  render: () => {\n    function FormContextStory() {\n      const [formData, setFormData] = React.useState<any>({\n        title: 'My Article',\n        description: 'This is a great article with an image',\n        image: {\n          download: demoImageSrc,\n          filename: 'article-image.jpg',\n          'content-type': 'image/jpeg'\n        }\n      });\n      const handleImageChange = (newImage: any) => {\n        setFormData({\n          ...formData,\n          image: newImage\n        });\n      };\n      return <div style={{\n        width: 980\n      }}>\n          <div style={{\n          padding: 24,\n          background: '#f9fafb',\n          borderRadius: 8,\n          border: '1px solid #e5e7eb'\n        }}>\n            <div style={{\n            marginBottom: 16\n          }}>\n              <label htmlFor=\"title\" style={{\n              display: 'block',\n              marginBottom: 4,\n              fontWeight: 600,\n              fontSize: 14\n            }}>\n                Title\n              </label>\n              <input id=\"title\" type=\"text\" value={formData.title} onChange={e => setFormData({\n              ...formData,\n              title: e.target.value\n            })} style={{\n              width: '100%',\n              padding: 8,\n              border: '1px solid #d1d5db',\n              borderRadius: 4\n            }} />\n            </div>\n\n            <div style={{\n            marginBottom: 16\n          }}>\n              <label htmlFor=\"description\" style={{\n              display: 'block',\n              marginBottom: 4,\n              fontWeight: 600,\n              fontSize: 14\n            }}>\n                Description\n              </label>\n              <textarea id=\"description\" value={formData.description} onChange={e => setFormData({\n              ...formData,\n              description: e.target.value\n            })} style={{\n              width: '100%',\n              padding: 8,\n              border: '1px solid #d1d5db',\n              borderRadius: 4,\n              minHeight: 80\n            }} />\n            </div>\n\n            <div style={{\n            marginBottom: 16\n          }}>\n              <label htmlFor=\"featured-image\" style={{\n              display: 'block',\n              marginBottom: 8,\n              fontWeight: 600,\n              fontSize: 14\n            }}>\n                Featured Image\n              </label>\n              {formData.image?.download && <div style={{\n              marginBottom: 12\n            }}>\n                  <img id=\"featured-image\" src={formData.image.data ? `data:${formData.image['content-type']};base64,${formData.image.data}` : formData.image.download} alt=\"Featured\" />\n                </div>}\n              <ImageEditorWrapper value={formData.image} setData={handleImageChange} />\n            </div>\n\n            <div style={{\n            marginTop: 24,\n            padding: 12,\n            background: '#eff6ff',\n            borderRadius: 4,\n            fontSize: 13\n          }}>\n              <strong>Form Data Preview:</strong>\n              <pre style={{\n              marginTop: 8,\n              fontSize: 11,\n              overflow: 'auto'\n            }}>\n                {JSON.stringify({\n                ...formData,\n                image: formData.image?.data ? {\n                  ...formData.image,\n                  data: `${formData.image.data.substring(0, 50)}... (${formData.image.data.length} chars)`\n                } : formData.image\n              }, null, 2)}\n              </pre>\n            </div>\n          </div>\n        </div>;\n    }\n    return <FormContextStory />;\n  }\n}",...InFormContext.parameters?.docs?.source}}}},"../../../packages/volto-image-editor/src/stories/utils.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{C:function(){return DemoContainer},i:function(){return createDemoImageDataURL}});var _home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),__jsx=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js").createElement;function createDemoImageDataURL(width=800,height=500){const canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;const ctx=canvas.getContext("2d");if(!ctx)return"";const grad=ctx.createLinearGradient(0,0,width,height);return grad.addColorStop(0,"#f0f4ff"),grad.addColorStop(1,"#d1ffe6"),ctx.fillStyle=grad,ctx.fillRect(0,0,width,height),ctx.fillStyle="#ff6b6b",ctx.fillRect(.1*width,.15*height,.3*width,.2*height),ctx.fillStyle="#4d96ff",ctx.beginPath(),ctx.arc(.7*width,.6*height,.15*Math.min(width,height),0,2*Math.PI),ctx.fill(),ctx.font=`${Math.floor(.06*height)}px sans-serif`,ctx.fillStyle="#1f2937",ctx.fillText("Demo image",.35*width,.52*height),canvas.toDataURL("image/jpeg",.92)}const DemoContainer=({width:width=960,height:height=640,maxWidth:maxWidth="100%",style:style,children:children})=>__jsx("div",{style:(0,_home_runner_work_volto_image_editor_volto_image_editor_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.c)({width:width,height:height,maxWidth:maxWidth,margin:"0 auto",border:"1px solid #e5e7eb",borderRadius:8,overflow:"hidden",background:"#fff",boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},style)},children)}}]);